<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>002af4063c0e456ca56ed6471e7a780a</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="team-208-final-analysis" class="cell markdown"
id="dW_yRGKKnBsI">
<h1>Team 208 Final Analysis</h1>
<p>Team members:
Kuan Ling Chen, Daniel Farr, Koushika Ravikumar, Shristi Shivbhagwan
Gaur</p>
</section>
<section id="executive-summary" class="cell markdown" id="E453eSPInowd">
<h2>Executive Summary</h2>
<p>For this project we aim to help Starbucks better understand their
customers and their needs throughout the United States. We are using the
review scores and sentiment analysis to quantify customer experience and
assess reviews and sentiment has changed over time. This analysis should
provide us with insights that can be used to provide Starbucks with
solutions to improve and/or maintain the satisfaction of their
customers.</p>
</section>
<section id="data-sources" class="cell markdown" id="4ucLYZhYnuCl">
<h2>Data Sources</h2>
<p>We have solely used the review data from Yelp for our analysis thus
far.</p>
<p>To prepare our data, we did an inner join of the business and review
json files that included all records that had coffee or cafe in their
category. This put the total number of records at about 600,000. To make
our analysis more feasible given the time and resources we have, we
pivoted to focusing on analyzing Starbucks reviews rather than reviews
for all coffee shops. Focusing on just Starbucks puts the total record
count at around 20,000.</p>
</section>
<section id="import-statements" class="cell markdown" id="4klV_C88tE5N">
<h3>Import Statements</h3>
</section>
<div class="cell code" data-execution_count="1"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="7joKUZjMpSVl" data-outputId="abc7eb76-2303-405a-d578-7a9c56ea0965">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.colab <span class="im">import</span> drive</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>drive.mount(<span class="st">&#39;/content/drive&#39;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Mounted at /content/drive
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="2" id="1gvu2JAApWnJ">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="3"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="O4sguiDMj8_1" data-outputId="607ea2b9-fc52-4ccb-d24e-89676afebffb">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install vaderSentiment</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> vaderSentiment.vaderSentiment <span class="im">import</span> SentimentIntensityAnalyzer</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Collecting vaderSentiment
  Downloading vaderSentiment-3.3.2-py2.py3-none-any.whl.metadata (572 bytes)
Requirement already satisfied: requests in /usr/local/lib/python3.11/dist-packages (from vaderSentiment) (2.32.3)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;vaderSentiment) (3.4.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;vaderSentiment) (3.10)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;vaderSentiment) (2.3.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;vaderSentiment) (2025.1.31)
Downloading vaderSentiment-3.3.2-py2.py3-none-any.whl (125 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 0.0/126.0 kB ? eta -:--:--━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 126.0/126.0 kB 8.7 MB/s eta 0:00:00
ent
Successfully installed vaderSentiment-3.3.2
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="4"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="fcQ9Z3rdiVyg" data-outputId="ea6a9662-e191-4edc-8f6b-11ced321c4f1">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>python <span class="op">-</span>m spacy download en_core_web_lg</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Collecting en-core-web-lg==3.7.1
  Downloading https://github.com/explosion/spacy-models/releases/download/en_core_web_lg-3.7.1/en_core_web_lg-3.7.1-py3-none-any.whl (587.7 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 587.7/587.7 MB 2.8 MB/s eta 0:00:00
ent already satisfied: spacy&lt;3.8.0,&gt;=3.7.2 in /usr/local/lib/python3.11/dist-packages (from en-core-web-lg==3.7.1) (3.7.5)
Requirement already satisfied: spacy-legacy&lt;3.1.0,&gt;=3.0.11 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.0.12)
Requirement already satisfied: spacy-loggers&lt;2.0.0,&gt;=1.0.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.0.5)
Requirement already satisfied: murmurhash&lt;1.1.0,&gt;=0.28.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.0.12)
Requirement already satisfied: cymem&lt;2.1.0,&gt;=2.0.2 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.0.11)
Requirement already satisfied: preshed&lt;3.1.0,&gt;=3.0.2 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.0.9)
Requirement already satisfied: thinc&lt;8.3.0,&gt;=8.2.2 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (8.2.5)
Requirement already satisfied: wasabi&lt;1.2.0,&gt;=0.9.1 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.1.3)
Requirement already satisfied: srsly&lt;3.0.0,&gt;=2.4.3 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.5.1)
Requirement already satisfied: catalogue&lt;2.1.0,&gt;=2.0.6 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.0.10)
Requirement already satisfied: weasel&lt;0.5.0,&gt;=0.1.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.4.1)
Requirement already satisfied: typer&lt;1.0.0,&gt;=0.3.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.15.1)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.38.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (4.67.1)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.13.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.32.3)
Requirement already satisfied: pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.10.6)
Requirement already satisfied: jinja2 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.1.5)
Requirement already satisfied: setuptools in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (75.1.0)
Requirement already satisfied: packaging&gt;=20.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (24.2)
Requirement already satisfied: langcodes&lt;4.0.0,&gt;=3.2.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.5.0)
Requirement already satisfied: numpy&gt;=1.19.0 in /usr/local/lib/python3.11/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.26.4)
Requirement already satisfied: language-data&gt;=1.2 in /usr/local/lib/python3.11/dist-packages (from langcodes&lt;4.0.0,&gt;=3.2.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.3.0)
Requirement already satisfied: annotated-types&gt;=0.6.0 in /usr/local/lib/python3.11/dist-packages (from pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.11/dist-packages (from pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.27.2)
Requirement already satisfied: typing-extensions&gt;=4.12.2 in /usr/local/lib/python3.11/dist-packages (from pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (4.12.2)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.11/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.4.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.11/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.10)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.11/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.3.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.11/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2025.1.31)
Requirement already satisfied: blis&lt;0.8.0,&gt;=0.7.8 in /usr/local/lib/python3.11/dist-packages (from thinc&lt;8.3.0,&gt;=8.2.2-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.7.11)
Requirement already satisfied: confection&lt;1.0.0,&gt;=0.0.1 in /usr/local/lib/python3.11/dist-packages (from thinc&lt;8.3.0,&gt;=8.2.2-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.1.5)
Requirement already satisfied: click&gt;=8.0.0 in /usr/local/lib/python3.11/dist-packages (from typer&lt;1.0.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (8.1.8)
Requirement already satisfied: shellingham&gt;=1.3.0 in /usr/local/lib/python3.11/dist-packages (from typer&lt;1.0.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.5.4)
Requirement already satisfied: rich&gt;=10.11.0 in /usr/local/lib/python3.11/dist-packages (from typer&lt;1.0.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (13.9.4)
Requirement already satisfied: cloudpathlib&lt;1.0.0,&gt;=0.7.0 in /usr/local/lib/python3.11/dist-packages (from weasel&lt;0.5.0,&gt;=0.1.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.20.0)
Requirement already satisfied: smart-open&lt;8.0.0,&gt;=5.2.1 in /usr/local/lib/python3.11/dist-packages (from weasel&lt;0.5.0,&gt;=0.1.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (7.1.0)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /usr/local/lib/python3.11/dist-packages (from jinja2-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.0.2)
Requirement already satisfied: marisa-trie&gt;=1.1.0 in /usr/local/lib/python3.11/dist-packages (from language-data&gt;=1.2-&gt;langcodes&lt;4.0.0,&gt;=3.2.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.2.1)
Requirement already satisfied: markdown-it-py&gt;=2.2.0 in /usr/local/lib/python3.11/dist-packages (from rich&gt;=10.11.0-&gt;typer&lt;1.0.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (3.0.0)
Requirement already satisfied: pygments&lt;3.0.0,&gt;=2.13.0 in /usr/local/lib/python3.11/dist-packages (from rich&gt;=10.11.0-&gt;typer&lt;1.0.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (2.18.0)
Requirement already satisfied: wrapt in /usr/local/lib/python3.11/dist-packages (from smart-open&lt;8.0.0,&gt;=5.2.1-&gt;weasel&lt;0.5.0,&gt;=0.1.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (1.17.2)
Requirement already satisfied: mdurl~=0.1 in /usr/local/lib/python3.11/dist-packages (from markdown-it-py&gt;=2.2.0-&gt;rich&gt;=10.11.0-&gt;typer&lt;1.0.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.2-&gt;en-core-web-lg==3.7.1) (0.1.2)
Installing collected packages: en-core-web-lg
Successfully installed en-core-web-lg-3.7.1
✔ Download and installation successful
You can now load the package via spacy.load(&#39;en_core_web_lg&#39;)
⚠ Restart to reload dependencies
If you are in a Jupyter or Colab notebook, you may need to restart Python in
order to load all the package&#39;s dependencies. You can do this by selecting the
&#39;Restart kernel&#39; or &#39;Restart runtime&#39; option.
</code></pre>
</div>
</div>
<section id="reading-in-data-and-data-preparation" class="cell markdown"
id="SUczgd5gtOMo">
<h3>Reading in Data and Data Preparation</h3>
</section>
<div class="cell code"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
data-collapsed="true" id="4h_0aYpRVF--"
data-outputId="fce5c026-4d9b-4a00-b1e6-0d25a7763b3a">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use this code if using a local copy of &#39;starbucks_data.csv&#39;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>starbucks_df <span class="op">=</span> pd.read_csv(<span class="st">&#39;starbucks_data.csv&#39;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>starbucks_df</span></code></pre></div>
<div class="output execute_result" data-execution_count="7">

  <div id="df-e9b6b728-b429-4cd3-90d1-8dd94bfe7044" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>review_id</th>
      <th>user_id</th>
      <th>business_id</th>
      <th>stars_x</th>
      <th>useful</th>
      <th>funny</th>
      <th>cool</th>
      <th>text</th>
      <th>date</th>
      <th>name</th>
      <th>...</th>
      <th>state</th>
      <th>postal_code</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>stars_y</th>
      <th>review_count</th>
      <th>is_open</th>
      <th>attributes</th>
      <th>categories</th>
      <th>hours</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ULzbgT5SPThiMOoo4a_Adw</td>
      <td>veBX5roHQLNnQ1rTtNh_gg</td>
      <td>aJvxWyQIG5OLfBw3qAe8xA</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Ordered Caramel frappe at Drive thru, BIG MIST...</td>
      <td>2017-12-29 19:38:31</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>TN</td>
      <td>37217</td>
      <td>36.085948</td>
      <td>-86.647493</td>
      <td>3.0</td>
      <td>65</td>
      <td>1</td>
      <td>{'BikeParking': 'False', 'RestaurantsPriceRang...</td>
      <td>Restaurants, Coffee &amp; Tea, Food</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>RXqhxbAuPPSNs-oyJJyOgw</td>
      <td>zZygOZLNyJX5nDqKrwa4HQ</td>
      <td>MjZQqZAmJeMco_Vq-Y9h-g</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Drum-roll please! Review #100 coming right up!...</td>
      <td>2014-02-05 19:38:24</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>IN</td>
      <td>46033</td>
      <td>39.979658</td>
      <td>-86.071156</td>
      <td>3.0</td>
      <td>33</td>
      <td>1</td>
      <td>{'OutdoorSeating': 'True', 'WiFi': "u'free'", ...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:30-19:0', 'Tuesday': '5:30-19:0'...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LuMkMBAUV1B-2dm2pqSBWw</td>
      <td>0SpK7eVn5TrpyQKPaohVBw</td>
      <td>u7MJKcNdZXYyTeb67vD5jw</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>We stopped here for my Chai and Hubby's coffee...</td>
      <td>2017-02-09 04:35:39</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>NJ</td>
      <td>08054</td>
      <td>39.980794</td>
      <td>-74.888500</td>
      <td>1.5</td>
      <td>17</td>
      <td>1</td>
      <td>{'RestaurantsPriceRange2': '2', 'BusinessAccep...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '7:0-19:0', 'Tuesday': '7:0-19:0', ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Z0Jt8xf0XqFD_xjPPm_d0g</td>
      <td>IVnrNZ8npRx04jkNp6-ERA</td>
      <td>saJFbz12EnzanelpD8_xXQ</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>There's been three times that I've ordered a g...</td>
      <td>2016-08-25 14:08:18</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>FL</td>
      <td>33579</td>
      <td>27.792761</td>
      <td>-82.330993</td>
      <td>2.5</td>
      <td>95</td>
      <td>1</td>
      <td>{'OutdoorSeating': 'True', 'RestaurantsPriceRa...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NoPOfj7gC1l48dC0XH7Spw</td>
      <td>tgP2gKsf3O9MyuLuolv2oQ</td>
      <td>KiE0h68HGOO7ZXAqkMBdiw</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>I went in when they had 4 people working, wait...</td>
      <td>2016-01-30 01:10:42</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>CA</td>
      <td>93101</td>
      <td>34.419440</td>
      <td>-119.704453</td>
      <td>2.5</td>
      <td>35</td>
      <td>0</td>
      <td>{'BusinessAcceptsCreditCards': 'True', 'Outdoo...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>21734</th>
      <td>Vt4zgo9wDRlNbUNds0Ttbg</td>
      <td>QPDFn3SQqZeBu7OBI78g9w</td>
      <td>-85kJMtb9wqNWDT8yLbitw</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Fair service-  messed up my drink cuppa times....</td>
      <td>2021-12-13 22:08:14</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>TN</td>
      <td>37064</td>
      <td>35.924073</td>
      <td>-86.871584</td>
      <td>3.5</td>
      <td>34</td>
      <td>1</td>
      <td>{'RestaurantsTakeOut': 'True', 'Caters': 'True...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '0:0-0:0', 'Tuesday': '5:0-20:0', '...</td>
    </tr>
    <tr>
      <th>21735</th>
      <td>OrYpmKDqmc3X7g7STa3jww</td>
      <td>F3ELBqGgDCX9YEhz_oS0xQ</td>
      <td>Ddg-J_j0YFErk7wpMtH_0A</td>
      <td>5</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>On my way out of Reno last week I noted a new ...</td>
      <td>2021-12-28 19:26:37</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>NV</td>
      <td>89523</td>
      <td>39.518385</td>
      <td>-119.887467</td>
      <td>3.0</td>
      <td>67</td>
      <td>1</td>
      <td>{'BusinessAcceptsCreditCards': 'True', 'Outdoo...</td>
      <td>Food, Coffee &amp; Tea, Coffee Roasteries</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>21736</th>
      <td>kB85EOTWW2Gw5-DpsyMa-g</td>
      <td>TZJzzQsE4R7RmqkVRaLEKw</td>
      <td>2rmpfdyV2POqpXtmPHO_IQ</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>always closing drive thru. i've driven here so...</td>
      <td>2021-12-28 18:12:04</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>AZ</td>
      <td>85741</td>
      <td>32.322490</td>
      <td>-111.012900</td>
      <td>2.5</td>
      <td>27</td>
      <td>1</td>
      <td>{'RestaurantsPriceRange2': '1', 'Caters': 'Fal...</td>
      <td>Coffee &amp; Tea, Food</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>21737</th>
      <td>feNpfoo9wlxYVBG5d0y1mQ</td>
      <td>dvu83QWKsnnbGvNVQ3mv7A</td>
      <td>GxuxCctcz3Hyk0wnuly7vQ</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>This is now one of two Starbucks in the shoppi...</td>
      <td>2017-01-21 00:19:27</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>AZ</td>
      <td>85712</td>
      <td>32.251683</td>
      <td>-110.891328</td>
      <td>3.5</td>
      <td>45</td>
      <td>0</td>
      <td>{'WiFi': "u'free'", 'RestaurantsPriceRange2': ...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '0:0-0:0', 'Tuesday': '5:0-19:0', '...</td>
    </tr>
    <tr>
      <th>21738</th>
      <td>M7NAWZ9P99ucR66LrxrUOQ</td>
      <td>6YRmtPVvnD_mexQifxAJsg</td>
      <td>IkjBNJvMZhea1c3j2H2Ahw</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Besides it being super busy often, usually, I ...</td>
      <td>2022-01-10 12:51:07</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>MO</td>
      <td>63104</td>
      <td>38.608325</td>
      <td>-90.240840</td>
      <td>3.5</td>
      <td>31</td>
      <td>1</td>
      <td>{'BikeParking': 'True', 'OutdoorSeating': 'Tru...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:0-19:0', 'Tuesday': '5:0-20:0', ...</td>
    </tr>
  </tbody>
</table>
<p>21739 rows × 22 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-e9b6b728-b429-4cd3-90d1-8dd94bfe7044')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-e9b6b728-b429-4cd3-90d1-8dd94bfe7044 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-e9b6b728-b429-4cd3-90d1-8dd94bfe7044');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-b6c613a8-edb8-40e6-b151-cbc71f9ee67d">
  <button class="colab-df-quickchart" onclick="quickchart('df-b6c613a8-edb8-40e6-b151-cbc71f9ee67d')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-b6c613a8-edb8-40e6-b151-cbc71f9ee67d button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_0c55a286-af47-4220-a1ff-3ac649ca9f75">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('starbucks_df')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_0c55a286-af47-4220-a1ff-3ac649ca9f75 button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('starbucks_df');
      }
      })();
    </script>
  </div>

    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="5"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
data-collapsed="true" id="20DVNmlvKJE-"
data-outputId="94d09986-961a-446d-bcd4-4ed0ef2c333e">
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pulling data from mounted Google Drive</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>starbucks_file_path <span class="op">=</span> <span class="st">&#39;/content/drive/MyDrive/Yelp Reviews/starbucks_data.csv&#39;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>starbucks_df <span class="op">=</span> pd.read_csv(starbucks_file_path)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>starbucks_df</span></code></pre></div>
<div class="output execute_result" data-execution_count="5">

  <div id="df-20aa78fa-48b4-4b03-97fa-687501358faa" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>review_id</th>
      <th>user_id</th>
      <th>business_id</th>
      <th>stars_x</th>
      <th>useful</th>
      <th>funny</th>
      <th>cool</th>
      <th>text</th>
      <th>date</th>
      <th>name</th>
      <th>...</th>
      <th>state</th>
      <th>postal_code</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>stars_y</th>
      <th>review_count</th>
      <th>is_open</th>
      <th>attributes</th>
      <th>categories</th>
      <th>hours</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ULzbgT5SPThiMOoo4a_Adw</td>
      <td>veBX5roHQLNnQ1rTtNh_gg</td>
      <td>aJvxWyQIG5OLfBw3qAe8xA</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Ordered Caramel frappe at Drive thru, BIG MIST...</td>
      <td>2017-12-29 19:38:31</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>TN</td>
      <td>37217</td>
      <td>36.085948</td>
      <td>-86.647493</td>
      <td>3.0</td>
      <td>65</td>
      <td>1</td>
      <td>{'BikeParking': 'False', 'RestaurantsPriceRang...</td>
      <td>Restaurants, Coffee &amp; Tea, Food</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>RXqhxbAuPPSNs-oyJJyOgw</td>
      <td>zZygOZLNyJX5nDqKrwa4HQ</td>
      <td>MjZQqZAmJeMco_Vq-Y9h-g</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Drum-roll please! Review #100 coming right up!...</td>
      <td>2014-02-05 19:38:24</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>IN</td>
      <td>46033</td>
      <td>39.979658</td>
      <td>-86.071156</td>
      <td>3.0</td>
      <td>33</td>
      <td>1</td>
      <td>{'OutdoorSeating': 'True', 'WiFi': "u'free'", ...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:30-19:0', 'Tuesday': '5:30-19:0'...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LuMkMBAUV1B-2dm2pqSBWw</td>
      <td>0SpK7eVn5TrpyQKPaohVBw</td>
      <td>u7MJKcNdZXYyTeb67vD5jw</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>We stopped here for my Chai and Hubby's coffee...</td>
      <td>2017-02-09 04:35:39</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>NJ</td>
      <td>08054</td>
      <td>39.980794</td>
      <td>-74.888500</td>
      <td>1.5</td>
      <td>17</td>
      <td>1</td>
      <td>{'RestaurantsPriceRange2': '2', 'BusinessAccep...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '7:0-19:0', 'Tuesday': '7:0-19:0', ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Z0Jt8xf0XqFD_xjPPm_d0g</td>
      <td>IVnrNZ8npRx04jkNp6-ERA</td>
      <td>saJFbz12EnzanelpD8_xXQ</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>There's been three times that I've ordered a g...</td>
      <td>2016-08-25 14:08:18</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>FL</td>
      <td>33579</td>
      <td>27.792761</td>
      <td>-82.330993</td>
      <td>2.5</td>
      <td>95</td>
      <td>1</td>
      <td>{'OutdoorSeating': 'True', 'RestaurantsPriceRa...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NoPOfj7gC1l48dC0XH7Spw</td>
      <td>tgP2gKsf3O9MyuLuolv2oQ</td>
      <td>KiE0h68HGOO7ZXAqkMBdiw</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>I went in when they had 4 people working, wait...</td>
      <td>2016-01-30 01:10:42</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>CA</td>
      <td>93101</td>
      <td>34.419440</td>
      <td>-119.704453</td>
      <td>2.5</td>
      <td>35</td>
      <td>0</td>
      <td>{'BusinessAcceptsCreditCards': 'True', 'Outdoo...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>21734</th>
      <td>Vt4zgo9wDRlNbUNds0Ttbg</td>
      <td>QPDFn3SQqZeBu7OBI78g9w</td>
      <td>-85kJMtb9wqNWDT8yLbitw</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Fair service-  messed up my drink cuppa times....</td>
      <td>2021-12-13 22:08:14</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>TN</td>
      <td>37064</td>
      <td>35.924073</td>
      <td>-86.871584</td>
      <td>3.5</td>
      <td>34</td>
      <td>1</td>
      <td>{'RestaurantsTakeOut': 'True', 'Caters': 'True...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '0:0-0:0', 'Tuesday': '5:0-20:0', '...</td>
    </tr>
    <tr>
      <th>21735</th>
      <td>OrYpmKDqmc3X7g7STa3jww</td>
      <td>F3ELBqGgDCX9YEhz_oS0xQ</td>
      <td>Ddg-J_j0YFErk7wpMtH_0A</td>
      <td>5</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>On my way out of Reno last week I noted a new ...</td>
      <td>2021-12-28 19:26:37</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>NV</td>
      <td>89523</td>
      <td>39.518385</td>
      <td>-119.887467</td>
      <td>3.0</td>
      <td>67</td>
      <td>1</td>
      <td>{'BusinessAcceptsCreditCards': 'True', 'Outdoo...</td>
      <td>Food, Coffee &amp; Tea, Coffee Roasteries</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>21736</th>
      <td>kB85EOTWW2Gw5-DpsyMa-g</td>
      <td>TZJzzQsE4R7RmqkVRaLEKw</td>
      <td>2rmpfdyV2POqpXtmPHO_IQ</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>always closing drive thru. i've driven here so...</td>
      <td>2021-12-28 18:12:04</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>AZ</td>
      <td>85741</td>
      <td>32.322490</td>
      <td>-111.012900</td>
      <td>2.5</td>
      <td>27</td>
      <td>1</td>
      <td>{'RestaurantsPriceRange2': '1', 'Caters': 'Fal...</td>
      <td>Coffee &amp; Tea, Food</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
    </tr>
    <tr>
      <th>21737</th>
      <td>feNpfoo9wlxYVBG5d0y1mQ</td>
      <td>dvu83QWKsnnbGvNVQ3mv7A</td>
      <td>GxuxCctcz3Hyk0wnuly7vQ</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>This is now one of two Starbucks in the shoppi...</td>
      <td>2017-01-21 00:19:27</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>AZ</td>
      <td>85712</td>
      <td>32.251683</td>
      <td>-110.891328</td>
      <td>3.5</td>
      <td>45</td>
      <td>0</td>
      <td>{'WiFi': "u'free'", 'RestaurantsPriceRange2': ...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '0:0-0:0', 'Tuesday': '5:0-19:0', '...</td>
    </tr>
    <tr>
      <th>21738</th>
      <td>M7NAWZ9P99ucR66LrxrUOQ</td>
      <td>6YRmtPVvnD_mexQifxAJsg</td>
      <td>IkjBNJvMZhea1c3j2H2Ahw</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Besides it being super busy often, usually, I ...</td>
      <td>2022-01-10 12:51:07</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>MO</td>
      <td>63104</td>
      <td>38.608325</td>
      <td>-90.240840</td>
      <td>3.5</td>
      <td>31</td>
      <td>1</td>
      <td>{'BikeParking': 'True', 'OutdoorSeating': 'Tru...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:0-19:0', 'Tuesday': '5:0-20:0', ...</td>
    </tr>
  </tbody>
</table>
<p>21739 rows × 22 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-20aa78fa-48b4-4b03-97fa-687501358faa')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-20aa78fa-48b4-4b03-97fa-687501358faa button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-20aa78fa-48b4-4b03-97fa-687501358faa');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-f123b4ff-7a20-4079-9d4e-538a3f4810fd">
  <button class="colab-df-quickchart" onclick="quickchart('df-f123b4ff-7a20-4079-9d4e-538a3f4810fd')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-f123b4ff-7a20-4079-9d4e-538a3f4810fd button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_e3e419d7-7e48-42da-98d8-2ff3bc3bfb44">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('starbucks_df')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_e3e419d7-7e48-42da-98d8-2ff3bc3bfb44 button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('starbucks_df');
      }
      })();
    </script>
  </div>

    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="6" id="RjgWmO3Cg4vb">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spacy <span class="co">#load spacy</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>nlp <span class="op">=</span> spacy.load(<span class="st">&quot;en_core_web_lg&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> normalize(review, lowercase, remove_stopwords):</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> lowercase:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        review <span class="op">=</span> review.lower()</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    doc <span class="op">=</span> nlp(review)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    lemmatized <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> token <span class="kw">in</span> doc:</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> remove_stopwords <span class="kw">or</span> (remove_stopwords <span class="kw">and</span> <span class="kw">not</span> token.is_stop):</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>            lemmatized.append(token.lemma_)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot; &quot;</span>.join(lemmatized)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>starbucks_df[<span class="st">&#39;processed&#39;</span>] <span class="op">=</span> starbucks_df[<span class="st">&#39;text&#39;</span>].<span class="bu">apply</span>(normalize, lowercase<span class="op">=</span><span class="va">True</span>, remove_stopwords<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="7"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="4ZCo5JtYjUEU" data-outputId="fff4d687-a6f5-471b-ed07-542ddd390589">
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>analyzer <span class="op">=</span> SentimentIntensityAnalyzer()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_sentiment_scores(text):</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  scores <span class="op">=</span> analyzer.polarity_scores(text)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> scores</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to the &#39;text&#39; column for Starbucks entries</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>starbucks_reviews <span class="op">=</span> starbucks_df</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>starbucks_reviews[<span class="st">&#39;sentiment_scores&#39;</span>] <span class="op">=</span> starbucks_reviews[<span class="st">&#39;text&#39;</span>].<span class="bu">apply</span>(get_sentiment_scores)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the results (optional)</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(starbucks_reviews[[<span class="st">&#39;text&#39;</span>, <span class="st">&#39;sentiment_scores&#39;</span>]])</span></code></pre></div>
<div class="output stream stdout">
<pre><code>                                                    text  \
0      Ordered Caramel frappe at Drive thru, BIG MIST...   
1      Drum-roll please! Review #100 coming right up!...   
2      We stopped here for my Chai and Hubby&#39;s coffee...   
3      There&#39;s been three times that I&#39;ve ordered a g...   
4      I went in when they had 4 people working, wait...   
...                                                  ...   
21734  Fair service-  messed up my drink cuppa times....   
21735  On my way out of Reno last week I noted a new ...   
21736  always closing drive thru. i&#39;ve driven here so...   
21737  This is now one of two Starbucks in the shoppi...   
21738  Besides it being super busy often, usually, I ...   

                                        sentiment_scores  
0      {&#39;neg&#39;: 0.146, &#39;neu&#39;: 0.854, &#39;pos&#39;: 0.0, &#39;comp...  
1      {&#39;neg&#39;: 0.057, &#39;neu&#39;: 0.724, &#39;pos&#39;: 0.219, &#39;co...  
2      {&#39;neg&#39;: 0.018, &#39;neu&#39;: 0.885, &#39;pos&#39;: 0.097, &#39;co...  
3      {&#39;neg&#39;: 0.0, &#39;neu&#39;: 1.0, &#39;pos&#39;: 0.0, &#39;compound...  
4      {&#39;neg&#39;: 0.172, &#39;neu&#39;: 0.828, &#39;pos&#39;: 0.0, &#39;comp...  
...                                                  ...  
21734  {&#39;neg&#39;: 0.226, &#39;neu&#39;: 0.597, &#39;pos&#39;: 0.176, &#39;co...  
21735  {&#39;neg&#39;: 0.012, &#39;neu&#39;: 0.87, &#39;pos&#39;: 0.118, &#39;com...  
21736  {&#39;neg&#39;: 0.189, &#39;neu&#39;: 0.75, &#39;pos&#39;: 0.061, &#39;com...  
21737  {&#39;neg&#39;: 0.0, &#39;neu&#39;: 0.958, &#39;pos&#39;: 0.042, &#39;comp...  
21738  {&#39;neg&#39;: 0.0, &#39;neu&#39;: 0.866, &#39;pos&#39;: 0.134, &#39;comp...  

[21739 rows x 2 columns]
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="8"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="AJFd10_ELTLp" data-outputId="cf9dee0d-9c38-4a5c-aed1-ff93903c11e0">
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> RegexpTokenizer</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Load your dataset (assuming the text column is called &#39;text&#39;)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(starbucks_file_path)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Extract the text data</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>text_data <span class="op">=</span> df[<span class="st">&#39;text&#39;</span>]  <span class="co"># Replace &#39;text&#39; with your actual column name if it&#39;s different</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>token <span class="op">=</span> RegexpTokenizer(<span class="vs">r&#39;[a-zA-Z]+&#39;</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Initialize the TfidfVectorizer</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>,ngram_range <span class="op">=</span> (<span class="dv">1</span>,<span class="dv">1</span>),tokenizer <span class="op">=</span> token.tokenize, max_features <span class="op">=</span> <span class="dv">1000</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Fit and transform the text data</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>tfidf_matrix <span class="op">=</span> vectorizer.fit_transform(text_data)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Convert the result into a DataFrame for easy interpretation</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>tfidf_df <span class="op">=</span> pd.DataFrame(tfidf_matrix.toarray(), columns<span class="op">=</span>vectorizer.get_feature_names_out())</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Display or save the result (optional)</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tfidf_df.head())</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Optionally, save the TF-IDF result to a CSV file</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">#tfidf_df.to_csv(&#39;tfidf_output.csv&#39;, index=False)</span></span></code></pre></div>
<div class="output stream stderr">
<pre><code>/usr/local/lib/python3.11/dist-packages/sklearn/feature_extraction/text.py:517: UserWarning: The parameter &#39;token_pattern&#39; will not be used since &#39;tokenizer&#39; is not None&#39;
  warnings.warn(
</code></pre>
</div>
<div class="output stream stdout">
<pre><code>   able  absolute  absolutely  access  accommodating  accurate  act  actually  \
0   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
1   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
2   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
3   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
4   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   

   add  added  ...  wrong  yeah  year  years  yelp  yes  yesterday  young  \
0  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
1  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
2  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
3  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
4  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   

   yummy  zero  
0    0.0   0.0  
1    0.0   0.0  
2    0.0   0.0  
3    0.0   0.0  
4    0.0   0.0  

[5 rows x 1000 columns]
</code></pre>
</div>
</div>
<section id="summary-statistics-of-the-data" class="cell markdown"
id="x6edft6Zt03p">
<h2>Summary Statistics of the Data</h2>
</section>
<div class="cell code" data-execution_count="9"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="bATewkfWd0uw" data-outputId="ada163c5-c52f-4634-f858-4b335dd22864">
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prompt: For starbucks_reviews, I want to find and display the total number of reviews, the total number of tokens (using the column &#39;processed&#39;), the number of unique words (using the column &#39;processed&#39;), the average review length (using the column &#39;processed&#39;), and the number of unique customers (using the column &#39;user_id&#39;)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of reviews</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>total_reviews <span class="op">=</span> <span class="bu">len</span>(starbucks_reviews)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of tokens</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>total_tokens <span class="op">=</span> starbucks_reviews[<span class="st">&#39;processed&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x.split())).<span class="bu">sum</span>()</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of unique words</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>unique_words <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> review <span class="kw">in</span> starbucks_reviews[<span class="st">&#39;processed&#39;</span>]:</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    unique_words.update(review.split())</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>num_unique_words <span class="op">=</span> <span class="bu">len</span>(unique_words)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Average review length</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>avg_review_length <span class="op">=</span> starbucks_reviews[<span class="st">&#39;processed&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x.split())).mean()</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of unique customers</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>unique_customers <span class="op">=</span> starbucks_reviews[<span class="st">&#39;user_id&#39;</span>].nunique()</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Summary Statistics of the Data:&quot;</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;--------------------------------&quot;</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Total number of reviews: </span><span class="sc">{</span>total_reviews<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Total number of tokens: </span><span class="sc">{</span>total_tokens<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Number of unique words: </span><span class="sc">{</span>num_unique_words<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Average review length: </span><span class="sc">{</span>avg_review_length<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Number of unique customers: </span><span class="sc">{</span>unique_customers<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Summary Statistics of the Data:
--------------------------------
Total number of reviews: 21739
Total number of tokens: 955117
Number of unique words: 20658
Average review length: 43.93564561387368
Number of unique customers: 16407
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="10"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:300}"
id="0usn4-qEt93D" data-outputId="a62e9d26-749e-4674-9982-34f7ef69e156">
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>starbucks_reviews.describe()</span></code></pre></div>
<div class="output execute_result" data-execution_count="10">

  <div id="df-22e77bbf-16f7-4068-8d95-6944e5e26020" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>stars_x</th>
      <th>useful</th>
      <th>funny</th>
      <th>cool</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>stars_y</th>
      <th>review_count</th>
      <th>is_open</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
      <td>21739.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>3.076636</td>
      <td>0.896775</td>
      <td>0.369934</td>
      <td>0.521689</td>
      <td>36.322348</td>
      <td>-91.025097</td>
      <td>3.078453</td>
      <td>45.513823</td>
      <td>0.884447</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.574248</td>
      <td>2.878679</td>
      <td>1.619088</td>
      <td>2.475666</td>
      <td>5.418370</td>
      <td>15.401952</td>
      <td>0.572668</td>
      <td>26.953491</td>
      <td>0.319695</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>27.767487</td>
      <td>-119.887467</td>
      <td>1.000000</td>
      <td>5.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>32.220487</td>
      <td>-90.499779</td>
      <td>2.500000</td>
      <td>26.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>38.670808</td>
      <td>-86.272056</td>
      <td>3.000000</td>
      <td>40.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>5.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>39.922417</td>
      <td>-82.316706</td>
      <td>3.500000</td>
      <td>59.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>5.000000</td>
      <td>112.000000</td>
      <td>72.000000</td>
      <td>111.000000</td>
      <td>53.647250</td>
      <td>-74.724090</td>
      <td>5.000000</td>
      <td>130.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-22e77bbf-16f7-4068-8d95-6944e5e26020')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-22e77bbf-16f7-4068-8d95-6944e5e26020 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-22e77bbf-16f7-4068-8d95-6944e5e26020');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-8dac8350-0aaa-4aa8-b395-2bc661394779">
  <button class="colab-df-quickchart" onclick="quickchart('df-8dac8350-0aaa-4aa8-b395-2bc661394779')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-8dac8350-0aaa-4aa8-b395-2bc661394779 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

    </div>
  </div>

</div>
</div>
<section
id="distribution-of-starbucks-by-state--average-review-score-in-each-state"
class="cell markdown" id="2es35ZBwuOst">
<h2>Distribution of Starbucks by State &amp; Average Review Score in
Each State</h2>
</section>
<div class="cell code" data-execution_count="11"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
id="R4SI-OvUe86W" data-outputId="9f14cb3b-77e4-492b-b85e-8ca080b8cdf0">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming starbucks_reviews DataFrame is already created as in the previous code</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Plot the number of Starbucks locations per state</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>starbucks_by_state <span class="op">=</span> starbucks_reviews[<span class="st">&#39;state&#39;</span>].value_counts()</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>plt.bar(starbucks_by_state.index, starbucks_by_state.values)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;State&quot;</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Number of Starbucks Locations&quot;</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Number of Starbucks Locations per State&quot;</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">&#39;right&#39;</span>)  <span class="co"># Rotate x-axis labels for readability</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout() <span class="co"># Adjust layout to prevent labels from overlapping</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Plot the average review score per state</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract compound sentiment scores</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>starbucks_reviews[<span class="st">&#39;compound_sentiment&#39;</span>] <span class="op">=</span> starbucks_reviews[<span class="st">&#39;sentiment_scores&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">&#39;compound&#39;</span>])</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by state and calculate the average compound sentiment</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>average_sentiment_by_state <span class="op">=</span> starbucks_reviews.groupby(<span class="st">&#39;state&#39;</span>)[<span class="st">&#39;compound_sentiment&#39;</span>].mean()</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>plt.bar(average_sentiment_by_state.index, average_sentiment_by_state.values)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;State&quot;</span>)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Average Review Score&quot;</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Average Review Score for Starbucks per State&quot;</span>)</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">&#39;right&#39;</span>) <span class="co"># Rotate x-axis labels for readability</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>plt.tight_layout() <span class="co"># Adjust layout to prevent labels from overlapping</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/99f22da306566a1a8dd9ef184657020fa620f425.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/a5d79644716d6d41f6bbc55e8355dd7799e4f368.png" /></p>
</div>
</div>
<section id="data-evaluation" class="cell markdown" id="W2Nw4FexvDUo">
<h2>Data Evaluation</h2>
<p>a. Our main questions are centered around Starbucks' customer
experience performance (such as what the general sentiment is and how
sentiment has changed over time); the review data we have is an
excellent source of information that can answer these questions and
provide us with valuable insights.
<br></p>
<p>b. We have a total of 21,739 reviews in our dataset, which is an
appropriate sample size for our analysis.
<br></p>
<p>c. Two areas where bias may be a concern is the unbalanced ratio of
positive to negative reviews and the number of reviews between states
being unbalanced.
<br></p>
<p>d. The two biggest potential challenges of processing this data is
the processing time some parts of the analysis will require (which we
have partially alleviated by focusing on Starbucks) and finding specific
and actionable solutions to insights with this data.</p>
</section>
<section id="preliminary-data-exploration" class="cell markdown"
id="1oGsFd1duzmD">
<h2>Preliminary Data Exploration</h2>
</section>
<div class="cell code" data-execution_count="12"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:520}"
id="pEAP0uF7QXcq" data-outputId="2d2ca8bc-4240-469f-b063-874263b728f8">
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by state and calculate the average review score and composite sentiment score</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>state_level_stats <span class="op">=</span> starbucks_reviews.groupby(<span class="st">&#39;state&#39;</span>)[[<span class="st">&#39;stars_x&#39;</span>, <span class="st">&#39;compound_sentiment&#39;</span>]].mean()</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns for clarity</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>state_level_stats <span class="op">=</span> state_level_stats.rename(columns<span class="op">=</span>{<span class="st">&#39;stars_x&#39;</span>: <span class="st">&#39;average_review_score&#39;</span>, <span class="st">&#39;compound_sentiment&#39;</span>: <span class="st">&#39;average_sentiment_score&#39;</span>})</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the results</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>state_level_stats</span></code></pre></div>
<div class="output execute_result" data-execution_count="12">

  <div id="df-a3310244-9562-45e6-a1dc-7ac4eec3c473" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>average_review_score</th>
      <th>average_sentiment_score</th>
    </tr>
    <tr>
      <th>state</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AB</th>
      <td>3.340909</td>
      <td>0.506922</td>
    </tr>
    <tr>
      <th>AZ</th>
      <td>3.203582</td>
      <td>0.410648</td>
    </tr>
    <tr>
      <th>CA</th>
      <td>2.956701</td>
      <td>0.293088</td>
    </tr>
    <tr>
      <th>DE</th>
      <td>2.642229</td>
      <td>0.197182</td>
    </tr>
    <tr>
      <th>FL</th>
      <td>3.178079</td>
      <td>0.396388</td>
    </tr>
    <tr>
      <th>ID</th>
      <td>3.290503</td>
      <td>0.440747</td>
    </tr>
    <tr>
      <th>IL</th>
      <td>3.018382</td>
      <td>0.329050</td>
    </tr>
    <tr>
      <th>IN</th>
      <td>3.354867</td>
      <td>0.437341</td>
    </tr>
    <tr>
      <th>LA</th>
      <td>2.892449</td>
      <td>0.305801</td>
    </tr>
    <tr>
      <th>MO</th>
      <td>3.113739</td>
      <td>0.353687</td>
    </tr>
    <tr>
      <th>NJ</th>
      <td>3.036386</td>
      <td>0.323500</td>
    </tr>
    <tr>
      <th>NV</th>
      <td>2.953895</td>
      <td>0.339840</td>
    </tr>
    <tr>
      <th>PA</th>
      <td>2.990375</td>
      <td>0.322297</td>
    </tr>
    <tr>
      <th>TN</th>
      <td>2.867388</td>
      <td>0.292960</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-a3310244-9562-45e6-a1dc-7ac4eec3c473')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-a3310244-9562-45e6-a1dc-7ac4eec3c473 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-a3310244-9562-45e6-a1dc-7ac4eec3c473');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-a5554fa4-333a-4c29-a0e0-266277a839dc">
  <button class="colab-df-quickchart" onclick="quickchart('df-a5554fa4-333a-4c29-a0e0-266277a839dc')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-a5554fa4-333a-4c29-a0e0-266277a839dc button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_68034f87-6743-45b1-965d-c26261d2443d">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('state_level_stats')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_68034f87-6743-45b1-965d-c26261d2443d button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('state_level_stats');
      }
      })();
    </script>
  </div>

    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="13"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
id="gePeRTaxy35g" data-outputId="b81009cd-e5fd-4cc4-f57e-efba64ed2a6e">
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot the average review and sentiment scores in each state by year</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming starbucks_reviews DataFrame is already loaded and processed as in the previous code</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the &#39;date&#39; column to datetime objects if not already done</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>starbucks_reviews[<span class="st">&#39;date&#39;</span>] <span class="op">=</span> pd.to_datetime(starbucks_reviews[<span class="st">&#39;date&#39;</span>])</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the year</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>starbucks_reviews[<span class="st">&#39;year&#39;</span>] <span class="op">=</span> starbucks_reviews[<span class="st">&#39;date&#39;</span>].dt.year</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by state and year, then calculate the mean review and sentiment scores</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>yearly_state_stats <span class="op">=</span> starbucks_reviews.groupby([<span class="st">&#39;state&#39;</span>, <span class="st">&#39;year&#39;</span>])[[<span class="st">&#39;stars_x&#39;</span>, <span class="st">&#39;compound_sentiment&#39;</span>]].mean().reset_index()</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns for clarity</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>yearly_state_stats <span class="op">=</span> yearly_state_stats.rename(columns<span class="op">=</span>{<span class="st">&#39;stars_x&#39;</span>: <span class="st">&#39;average_review_score&#39;</span>, <span class="st">&#39;compound_sentiment&#39;</span>: <span class="st">&#39;average_sentiment_score&#39;</span>})</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate through each state and create a plot</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> state <span class="kw">in</span> yearly_state_stats[<span class="st">&#39;state&#39;</span>].unique():</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    state_data <span class="op">=</span> yearly_state_stats[yearly_state_stats[<span class="st">&#39;state&#39;</span>] <span class="op">==</span> state]</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    plt.plot(state_data[<span class="st">&#39;year&#39;</span>], state_data[<span class="st">&#39;average_review_score&#39;</span>], label<span class="op">=</span><span class="st">&#39;Average Review Score&#39;</span>, marker<span class="op">=</span><span class="st">&#39;o&#39;</span>)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    plt.plot(state_data[<span class="st">&#39;year&#39;</span>], state_data[<span class="st">&#39;average_sentiment_score&#39;</span>], label<span class="op">=</span><span class="st">&#39;Average Sentiment Score&#39;</span>, marker<span class="op">=</span><span class="st">&#39;x&#39;</span>)</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">&#39;Year&#39;</span>)</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">&#39;Score&#39;</span>)</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f&#39;Yearly Average Review and Sentiment Scores for Starbucks in </span><span class="sc">{</span>state<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    plt.grid(<span class="va">True</span>)</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/4a15c11d4d3d9f1ca7519acbd5b863e8261fb07f.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/38ce1453c3242a72e838f1941c7fb36d12e096a3.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/610b90b2c883f95a1826619b9a21bdb42904283c.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/1b2871103f6ab6de119bb0f7e99732fb280b1c40.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/6869c8fbccb69d7569b30ca02cb45c57348552de.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/7ce90f6ff6ec4df316006b26cfbc77765779471f.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/247a06d3d1cc89ff89513560a19d04ce1f8a097b.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/7dcb82af9b066d0762815aab7e07b6c6b8eb8e00.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/1adf65fe45e1e6523d243db48626f505b32150d9.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/3d1db50e2d2b21be866b3391ba633bc06be0ea06.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/807dc057209ce982ced9dad53302c7b0ae02f33f.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/be243817fcaa8fac7422a5bad4a527d76568ebc9.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/64e253e973f14a346073ab3e15a85caaa9f19a0b.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/85049c20c86adb428d8ceaf67a15618d57559fc3.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="14"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
id="dHhZ5reazlyj" data-outputId="27246466-33eb-47cb-dff2-9a76180aa356">
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalized average review and normalized sentiment scores in each state by year</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming yearly_state_stats DataFrame is already created as in the previous code</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize the scores for each state</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> state <span class="kw">in</span> yearly_state_stats[<span class="st">&#39;state&#39;</span>].unique():</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    state_data <span class="op">=</span> yearly_state_stats[yearly_state_stats[<span class="st">&#39;state&#39;</span>] <span class="op">==</span> state].copy()  <span class="co"># Create a copy to avoid SettingWithCopyWarning</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Normalize average_review_score</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    state_data[<span class="st">&#39;normalized_average_review_score&#39;</span>] <span class="op">=</span> (state_data[<span class="st">&#39;average_review_score&#39;</span>] <span class="op">-</span> state_data[<span class="st">&#39;average_review_score&#39;</span>].<span class="bu">min</span>()) <span class="op">/</span> (state_data[<span class="st">&#39;average_review_score&#39;</span>].<span class="bu">max</span>() <span class="op">-</span> state_data[<span class="st">&#39;average_review_score&#39;</span>].<span class="bu">min</span>())</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Normalize average_sentiment_score</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    state_data[<span class="st">&#39;normalized_average_sentiment_score&#39;</span>] <span class="op">=</span> (state_data[<span class="st">&#39;average_sentiment_score&#39;</span>] <span class="op">-</span> state_data[<span class="st">&#39;average_sentiment_score&#39;</span>].<span class="bu">min</span>()) <span class="op">/</span> (state_data[<span class="st">&#39;average_sentiment_score&#39;</span>].<span class="bu">max</span>() <span class="op">-</span> state_data[<span class="st">&#39;average_sentiment_score&#39;</span>].<span class="bu">min</span>())</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    plt.plot(state_data[<span class="st">&#39;year&#39;</span>], state_data[<span class="st">&#39;normalized_average_review_score&#39;</span>], label<span class="op">=</span><span class="st">&#39;Normalized Average Review Score&#39;</span>, marker<span class="op">=</span><span class="st">&#39;o&#39;</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    plt.plot(state_data[<span class="st">&#39;year&#39;</span>], state_data[<span class="st">&#39;normalized_average_sentiment_score&#39;</span>], label<span class="op">=</span><span class="st">&#39;Normalized Average Sentiment Score&#39;</span>, marker<span class="op">=</span><span class="st">&#39;x&#39;</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">&#39;Year&#39;</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">&#39;Normalized Score&#39;</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f&#39;Normalized Yearly Average Review and Sentiment Scores for Starbucks in </span><span class="sc">{</span>state<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    plt.grid(<span class="va">True</span>)</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/837f089b462c90d65dda539bb8aa4be7ab200bd1.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/1ec518feb805df5cc0a62269db6b58ee5c2b3a22.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/ef3c6041ff1403574ae1ae3596e8d8877ab1cf6b.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/8c8b6e95e04f639888bcbd8ffa95a7687e900e36.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/e77d6f5a567e141a42264aaf33f7d1204b527f3c.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/574975bf3c5a6e2d0bc60d0004f3c9362839e1c3.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/0112cc1087430291f05fd9153e6c6dfe037ca409.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/c0ddf22df6c6e04da9a43d78f6601f5a8ac11aa0.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/52d7bb140842fadb51d06be02240792ee24a40a7.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/71014a3053f3899f29a708e436246a71135753ae.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/f6b380d27c1b9e8608aa8ba6b83234bfb8570ffb.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/d1fba9927fea79e72e5596e666661fa8e57ce8dd.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/6af01a876171d8bfa64b299f5bbd1d1106b2fd24.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/5ddc7ba730f778bfdf1dccc628a726cb08200482.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="15"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
id="xt7k-qHqNebo" data-outputId="03266daa-d665-4abb-b42f-6290c31c3cbc">
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Word cloud for the top 10% of Starbucks reviews going by review score in the &#39;star_x&#39; column as well as for the bottom 10% of reviews</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install wordcloud</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the 10th and 90th percentiles of &#39;star_x&#39;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>percentile_10 <span class="op">=</span> starbucks_reviews[<span class="st">&#39;stars_x&#39;</span>].quantile(<span class="fl">0.10</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>percentile_90 <span class="op">=</span> starbucks_reviews[<span class="st">&#39;stars_x&#39;</span>].quantile(<span class="fl">0.90</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter reviews based on percentiles</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>bottom_10_reviews <span class="op">=</span> starbucks_reviews[starbucks_reviews[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&lt;=</span> percentile_10]</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>top_10_reviews <span class="op">=</span> starbucks_reviews[starbucks_reviews[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&gt;=</span> percentile_90]</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to generate and display word cloud</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_wordcloud(text, title):</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    wordcloud <span class="op">=</span> WordCloud(width<span class="op">=</span><span class="dv">800</span>, height<span class="op">=</span><span class="dv">400</span>, background_color<span class="op">=</span><span class="st">&#39;white&#39;</span>).generate(<span class="st">&#39; &#39;</span>.join(text))</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    plt.imshow(wordcloud, interpolation<span class="op">=</span><span class="st">&#39;bilinear&#39;</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    plt.axis(<span class="st">&#39;off&#39;</span>)</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    plt.title(title)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate word clouds</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>generate_wordcloud(bottom_10_reviews[<span class="st">&#39;processed&#39;</span>], <span class="st">&#39;Word Cloud for Bottom 10</span><span class="sc">% o</span><span class="st">f Starbucks Reviews&#39;</span>)</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>generate_wordcloud(top_10_reviews[<span class="st">&#39;processed&#39;</span>], <span class="st">&#39;Word Cloud for Top 10</span><span class="sc">% o</span><span class="st">f Starbucks Reviews&#39;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Requirement already satisfied: wordcloud in /usr/local/lib/python3.11/dist-packages (1.9.4)
Requirement already satisfied: numpy&gt;=1.6.1 in /usr/local/lib/python3.11/dist-packages (from wordcloud) (1.26.4)
Requirement already satisfied: pillow in /usr/local/lib/python3.11/dist-packages (from wordcloud) (11.1.0)
Requirement already satisfied: matplotlib in /usr/local/lib/python3.11/dist-packages (from wordcloud) (3.10.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (1.3.1)
Requirement already satisfied: cycler&gt;=0.10 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (4.56.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (1.4.8)
Requirement already satisfied: packaging&gt;=20.0 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (24.2)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (3.2.1)
Requirement already satisfied: python-dateutil&gt;=2.7 in /usr/local/lib/python3.11/dist-packages (from matplotlib-&gt;wordcloud) (2.8.2)
Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.11/dist-packages (from python-dateutil&gt;=2.7-&gt;matplotlib-&gt;wordcloud) (1.17.0)
</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/e9990b62f5bef5dfbe4c7f029461a4f1e8950117.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/da7ef15fd0489287fca7a8392db24f4eb2183ead.png" /></p>
</div>
</div>
<section id="proposed-solution" class="cell markdown" id="PDe9r7alu7Hq">
<h2>Proposed Solution</h2>
<p>From our prelimnary data exploration, we have found that the average
review scores and customer sentiment has been declining at Starbucks in
most states, with the exception of Arizona (AZ) and Louisiana (LA) where
we see notably higher averages.</p>
<p>Our next step is to investivagte the differences in reviews between
AZ, LA, and the others to identify why these customers feel the way that
they do, examine what impact this has had (if any) on Starbucks'
business, and where Starbucks needs to improve to boost customer
sentiment.</p>
<p>To do so, We will use methods such as language modeling to create
aggregate summaries based on the good and bad reviews reviews in each
state to compare more precisely identify Starbucks' strengths and
weaknesses.</p>
<p>We also want to use machine learning to perform regression on the
sentiment data to figure what features are important in determining
sentiment and predicting future customer sentiment.</p>
</section>
<section id="bert-topic-modeling" class="cell markdown"
id="Z7qy3ldpB5Oy">
<h1>BERT Topic Modeling</h1>
</section>
<div class="cell code" data-execution_count="16"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:794}"
id="XIDZ-nLvB4Dr" data-outputId="d7439621-4dd7-4ed8-ac63-cbd54e1044bc">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> starbucks_df</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>data.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="16">

  <div id="df-591c1b58-9d61-4e27-91f7-11c63c864291" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>review_id</th>
      <th>user_id</th>
      <th>business_id</th>
      <th>stars_x</th>
      <th>useful</th>
      <th>funny</th>
      <th>cool</th>
      <th>text</th>
      <th>date</th>
      <th>name</th>
      <th>...</th>
      <th>stars_y</th>
      <th>review_count</th>
      <th>is_open</th>
      <th>attributes</th>
      <th>categories</th>
      <th>hours</th>
      <th>processed</th>
      <th>sentiment_scores</th>
      <th>compound_sentiment</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ULzbgT5SPThiMOoo4a_Adw</td>
      <td>veBX5roHQLNnQ1rTtNh_gg</td>
      <td>aJvxWyQIG5OLfBw3qAe8xA</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Ordered Caramel frappe at Drive thru, BIG MIST...</td>
      <td>2017-12-29 19:38:31</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>3.0</td>
      <td>65</td>
      <td>1</td>
      <td>{'BikeParking': 'False', 'RestaurantsPriceRang...</td>
      <td>Restaurants, Coffee &amp; Tea, Food</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
      <td>order caramel frappe drive , big mistake ! tak...</td>
      <td>{'neg': 0.146, 'neu': 0.854, 'pos': 0.0, 'comp...</td>
      <td>-0.5307</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>1</th>
      <td>RXqhxbAuPPSNs-oyJJyOgw</td>
      <td>zZygOZLNyJX5nDqKrwa4HQ</td>
      <td>MjZQqZAmJeMco_Vq-Y9h-g</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Drum-roll please! Review #100 coming right up!...</td>
      <td>2014-02-05 19:38:24</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>3.0</td>
      <td>33</td>
      <td>1</td>
      <td>{'OutdoorSeating': 'True', 'WiFi': "u'free'", ...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:30-19:0', 'Tuesday': '5:30-19:0'...</td>
      <td>drum - roll ! review # 100 come right ! \n\n c...</td>
      <td>{'neg': 0.057, 'neu': 0.724, 'pos': 0.219, 'co...</td>
      <td>0.9863</td>
      <td>2014</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LuMkMBAUV1B-2dm2pqSBWw</td>
      <td>0SpK7eVn5TrpyQKPaohVBw</td>
      <td>u7MJKcNdZXYyTeb67vD5jw</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>We stopped here for my Chai and Hubby's coffee...</td>
      <td>2017-02-09 04:35:39</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>1.5</td>
      <td>17</td>
      <td>1</td>
      <td>{'RestaurantsPriceRange2': '2', 'BusinessAccep...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '7:0-19:0', 'Tuesday': '7:0-19:0', ...</td>
      <td>stop chai hubby coffee caffeine mania . line g...</td>
      <td>{'neg': 0.018, 'neu': 0.885, 'pos': 0.097, 'co...</td>
      <td>0.7544</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Z0Jt8xf0XqFD_xjPPm_d0g</td>
      <td>IVnrNZ8npRx04jkNp6-ERA</td>
      <td>saJFbz12EnzanelpD8_xXQ</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>There's been three times that I've ordered a g...</td>
      <td>2016-08-25 14:08:18</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>2.5</td>
      <td>95</td>
      <td>1</td>
      <td>{'OutdoorSeating': 'True', 'RestaurantsPriceRa...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>{'Monday': '5:0-21:0', 'Tuesday': '5:0-21:0', ...</td>
      <td>time order green tea lemonade get peach tea le...</td>
      <td>{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound...</td>
      <td>0.0000</td>
      <td>2016</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NoPOfj7gC1l48dC0XH7Spw</td>
      <td>tgP2gKsf3O9MyuLuolv2oQ</td>
      <td>KiE0h68HGOO7ZXAqkMBdiw</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>I went in when they had 4 people working, wait...</td>
      <td>2016-01-30 01:10:42</td>
      <td>Starbucks</td>
      <td>...</td>
      <td>2.5</td>
      <td>35</td>
      <td>0</td>
      <td>{'BusinessAcceptsCreditCards': 'True', 'Outdoo...</td>
      <td>Food, Coffee &amp; Tea</td>
      <td>NaN</td>
      <td>go 4 people work , wait 15 minute tea latte co...</td>
      <td>{'neg': 0.172, 'neu': 0.828, 'pos': 0.0, 'comp...</td>
      <td>-0.9311</td>
      <td>2016</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-591c1b58-9d61-4e27-91f7-11c63c864291')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-591c1b58-9d61-4e27-91f7-11c63c864291 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-591c1b58-9d61-4e27-91f7-11c63c864291');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-ce95376a-c0ac-4453-b3e6-38bd6d30aa6e">
  <button class="colab-df-quickchart" onclick="quickchart('df-ce95376a-c0ac-4453-b3e6-38bd6d30aa6e')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-ce95376a-c0ac-4453-b3e6-38bd6d30aa6e button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="17" id="q0A0kJJeDqY-">
<div class="sourceCode" id="cb26"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column containing the length each headline text</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&quot;text_len&quot;</span>] <span class="op">=</span> data[<span class="st">&quot;text&quot;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x : <span class="bu">len</span>(x.split()))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>data_text <span class="op">=</span> data[[<span class="st">&#39;text&#39;</span>]]</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="18"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="godjEBS3Dsig" data-outputId="95cd7a59-46de-459f-f030-ebcf37d3a4d7">
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;The longest headline has: </span><span class="sc">{}</span><span class="st"> words&quot;</span>.<span class="bu">format</span>(data.text_len.<span class="bu">max</span>()))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>The longest headline has: 949 words
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="19"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:523}"
id="YkTychtuDuEh" data-outputId="27d1c6cc-d75a-448c-d8dc-fec775549328">
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the length distribution</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>sns.displot(data.text_len, kde<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="19">
<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7844ac4d1990&gt;</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/51cf10b2f1d08499117070603f7be747827cd56f.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="20"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="Ew6bxLO9Dv_k" data-outputId="3c429c71-132e-4e1d-d6ff-cc4b01405e7f">
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> data.sample(<span class="dv">3</span>).index:</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    headline <span class="op">=</span> data.iloc[idx]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Headline #</span><span class="sc">{}</span><span class="st">:&quot;</span>.<span class="bu">format</span>(idx))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Publication date: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(headline.date))</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Text: </span><span class="sc">{}</span><span class="ch">\n</span><span class="st">&quot;</span>.<span class="bu">format</span>(headline.text))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Headline #14669:
Publication date: 2021-08-21 13:19:36
Text: I&#39;ll agree with the previous reviewer that the morning staff are great. Hopefully this place will get all shifts up to speed. It is a great, cozy location.

Headline #1466:
Publication date: 2019-01-20 23:05:12
Text: I frequent this Starbucks to study. It is a larger Starbucks than most in Tampa area (I&#39;ve been to 6+ recently to study); it has over 6 &#39;reading&#39; chairs (no table), 6+ two-seater tables with one side of booth seating and your standard long table with 8-9 seats. There is outdoor seating as well.

The staff is friendly and competent. I&#39;ve had a few experiences at other Starbucks locations where, in a slow period, they&#39;re joking / messing around to the extent that it&#39;s disruptive to people trying to read or study. I&#39;ve been to this location over a dozen times total and I&#39;ve never had that experience here.

Five star location for sure, I&#39;d highly recommend coming in to either grab a quick drink or stay a while.

Headline #11463:
Publication date: 2017-01-10 03:24:27
Text: This is my husband&#39;s and my favourite Starbucks location. We&#39;ve been to this one over 20 times and I am always impressed. The drinks are made exactly the way they should be here. Each barista seems cheerful and happy to be there- and one has even taken the time to learn our names!
Behind the counters everything is always clean and wiped and shiny. 
This is not the largest location however the seating is maximized in a good way. Lots of bar seats along the edges and individual two and four person tables. We&#39;ve only experienced one time where we were not able to find a seat. 
The decor uses a gauge and some of the metal from the old brewery- so it&#39;s a very nice tie in to the whole district feel. 
Not all Starbucks are created equal- and this one feels like home to me. Go check it out!

</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="21"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="Z6oCjQN_D6j9" data-outputId="5b6394be-21f9-48d0-9151-6fdd2dece0b5">
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install bertopic</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Collecting bertopic
  Downloading bertopic-0.16.4-py3-none-any.whl.metadata (23 kB)
Requirement already satisfied: hdbscan&gt;=0.8.29 in /usr/local/lib/python3.11/dist-packages (from bertopic) (0.8.40)
Requirement already satisfied: numpy&gt;=1.20.0 in /usr/local/lib/python3.11/dist-packages (from bertopic) (1.26.4)
Requirement already satisfied: pandas&gt;=1.1.5 in /usr/local/lib/python3.11/dist-packages (from bertopic) (2.2.2)
Requirement already satisfied: plotly&gt;=4.7.0 in /usr/local/lib/python3.11/dist-packages (from bertopic) (5.24.1)
Requirement already satisfied: scikit-learn&gt;=0.22.2.post1 in /usr/local/lib/python3.11/dist-packages (from bertopic) (1.6.1)
Requirement already satisfied: sentence-transformers&gt;=0.4.1 in /usr/local/lib/python3.11/dist-packages (from bertopic) (3.4.1)
Requirement already satisfied: tqdm&gt;=4.41.1 in /usr/local/lib/python3.11/dist-packages (from bertopic) (4.67.1)
Requirement already satisfied: umap-learn&gt;=0.5.0 in /usr/local/lib/python3.11/dist-packages (from bertopic) (0.5.7)
Requirement already satisfied: scipy&gt;=1.0 in /usr/local/lib/python3.11/dist-packages (from hdbscan&gt;=0.8.29-&gt;bertopic) (1.13.1)
Requirement already satisfied: joblib&gt;=1.0 in /usr/local/lib/python3.11/dist-packages (from hdbscan&gt;=0.8.29-&gt;bertopic) (1.4.2)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /usr/local/lib/python3.11/dist-packages (from pandas&gt;=1.1.5-&gt;bertopic) (2.8.2)
Requirement already satisfied: pytz&gt;=2020.1 in /usr/local/lib/python3.11/dist-packages (from pandas&gt;=1.1.5-&gt;bertopic) (2025.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /usr/local/lib/python3.11/dist-packages (from pandas&gt;=1.1.5-&gt;bertopic) (2025.1)
Requirement already satisfied: tenacity&gt;=6.2.0 in /usr/local/lib/python3.11/dist-packages (from plotly&gt;=4.7.0-&gt;bertopic) (9.0.0)
Requirement already satisfied: packaging in /usr/local/lib/python3.11/dist-packages (from plotly&gt;=4.7.0-&gt;bertopic) (24.2)
Requirement already satisfied: threadpoolctl&gt;=3.1.0 in /usr/local/lib/python3.11/dist-packages (from scikit-learn&gt;=0.22.2.post1-&gt;bertopic) (3.5.0)
Requirement already satisfied: transformers&lt;5.0.0,&gt;=4.41.0 in /usr/local/lib/python3.11/dist-packages (from sentence-transformers&gt;=0.4.1-&gt;bertopic) (4.48.3)
Requirement already satisfied: torch&gt;=1.11.0 in /usr/local/lib/python3.11/dist-packages (from sentence-transformers&gt;=0.4.1-&gt;bertopic) (2.5.1+cu124)
Requirement already satisfied: huggingface-hub&gt;=0.20.0 in /usr/local/lib/python3.11/dist-packages (from sentence-transformers&gt;=0.4.1-&gt;bertopic) (0.28.1)
Requirement already satisfied: Pillow in /usr/local/lib/python3.11/dist-packages (from sentence-transformers&gt;=0.4.1-&gt;bertopic) (11.1.0)
Requirement already satisfied: numba&gt;=0.51.2 in /usr/local/lib/python3.11/dist-packages (from umap-learn&gt;=0.5.0-&gt;bertopic) (0.61.0)
Requirement already satisfied: pynndescent&gt;=0.5 in /usr/local/lib/python3.11/dist-packages (from umap-learn&gt;=0.5.0-&gt;bertopic) (0.5.13)
Requirement already satisfied: filelock in /usr/local/lib/python3.11/dist-packages (from huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.17.0)
Requirement already satisfied: fsspec&gt;=2023.5.0 in /usr/local/lib/python3.11/dist-packages (from huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (2024.10.0)
Requirement already satisfied: pyyaml&gt;=5.1 in /usr/local/lib/python3.11/dist-packages (from huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (6.0.2)
Requirement already satisfied: requests in /usr/local/lib/python3.11/dist-packages (from huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (2.32.3)
Requirement already satisfied: typing-extensions&gt;=3.7.4.3 in /usr/local/lib/python3.11/dist-packages (from huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (4.12.2)
Requirement already satisfied: llvmlite&lt;0.45,&gt;=0.44.0dev0 in /usr/local/lib/python3.11/dist-packages (from numba&gt;=0.51.2-&gt;umap-learn&gt;=0.5.0-&gt;bertopic) (0.44.0)
Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.11/dist-packages (from python-dateutil&gt;=2.8.2-&gt;pandas&gt;=1.1.5-&gt;bertopic) (1.17.0)
Requirement already satisfied: networkx in /usr/local/lib/python3.11/dist-packages (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.4.2)
Requirement already satisfied: jinja2 in /usr/local/lib/python3.11/dist-packages (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.1.5)
Collecting nvidia-cuda-nvrtc-cu12==12.4.127 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cuda_nvrtc_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting nvidia-cuda-runtime-cu12==12.4.127 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cuda_runtime_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting nvidia-cuda-cupti-cu12==12.4.127 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cuda_cupti_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl.metadata (1.6 kB)
Collecting nvidia-cudnn-cu12==9.1.0.70 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cudnn_cu12-9.1.0.70-py3-none-manylinux2014_x86_64.whl.metadata (1.6 kB)
Collecting nvidia-cublas-cu12==12.4.5.8 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cublas_cu12-12.4.5.8-py3-none-manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting nvidia-cufft-cu12==11.2.1.3 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cufft_cu12-11.2.1.3-py3-none-manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting nvidia-curand-cu12==10.3.5.147 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_curand_cu12-10.3.5.147-py3-none-manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting nvidia-cusolver-cu12==11.6.1.9 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cusolver_cu12-11.6.1.9-py3-none-manylinux2014_x86_64.whl.metadata (1.6 kB)
Collecting nvidia-cusparse-cu12==12.3.1.170 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_cusparse_cu12-12.3.1.170-py3-none-manylinux2014_x86_64.whl.metadata (1.6 kB)
Requirement already satisfied: nvidia-nccl-cu12==2.21.5 in /usr/local/lib/python3.11/dist-packages (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (2.21.5)
Requirement already satisfied: nvidia-nvtx-cu12==12.4.127 in /usr/local/lib/python3.11/dist-packages (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (12.4.127)
Collecting nvidia-nvjitlink-cu12==12.4.127 (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic)
  Downloading nvidia_nvjitlink_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl.metadata (1.5 kB)
Requirement already satisfied: triton==3.1.0 in /usr/local/lib/python3.11/dist-packages (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.1.0)
Requirement already satisfied: sympy==1.13.1 in /usr/local/lib/python3.11/dist-packages (from torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (1.13.1)
Requirement already satisfied: mpmath&lt;1.4,&gt;=1.1.0 in /usr/local/lib/python3.11/dist-packages (from sympy==1.13.1-&gt;torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (1.3.0)
Requirement already satisfied: regex!=2019.12.17 in /usr/local/lib/python3.11/dist-packages (from transformers&lt;5.0.0,&gt;=4.41.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (2024.11.6)
Requirement already satisfied: tokenizers&lt;0.22,&gt;=0.21 in /usr/local/lib/python3.11/dist-packages (from transformers&lt;5.0.0,&gt;=4.41.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (0.21.0)
Requirement already satisfied: safetensors&gt;=0.4.1 in /usr/local/lib/python3.11/dist-packages (from transformers&lt;5.0.0,&gt;=4.41.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (0.5.3)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /usr/local/lib/python3.11/dist-packages (from jinja2-&gt;torch&gt;=1.11.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.0.2)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.4.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (3.10)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (2.3.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.11/dist-packages (from requests-&gt;huggingface-hub&gt;=0.20.0-&gt;sentence-transformers&gt;=0.4.1-&gt;bertopic) (2025.1.31)
Downloading bertopic-0.16.4-py3-none-any.whl (143 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 143.7/143.7 kB 9.0 MB/s eta 0:00:00
anylinux2014_x86_64.whl (363.4 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 363.4/363.4 MB 1.4 MB/s eta 0:00:00
anylinux2014_x86_64.whl (13.8 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.8/13.8 MB 87.6 MB/s eta 0:00:00
anylinux2014_x86_64.whl (24.6 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 24.6/24.6 MB 67.7 MB/s eta 0:00:00
e_cu12-12.4.127-py3-none-manylinux2014_x86_64.whl (883 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 883.7/883.7 kB 52.0 MB/s eta 0:00:00
anylinux2014_x86_64.whl (664.8 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 664.8/664.8 MB 3.0 MB/s eta 0:00:00
anylinux2014_x86_64.whl (211.5 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 211.5/211.5 MB 4.6 MB/s eta 0:00:00
anylinux2014_x86_64.whl (56.3 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 56.3/56.3 MB 10.6 MB/s eta 0:00:00
anylinux2014_x86_64.whl (127.9 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 127.9/127.9 MB 7.9 MB/s eta 0:00:00
anylinux2014_x86_64.whl (207.5 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 207.5/207.5 MB 5.5 MB/s eta 0:00:00
anylinux2014_x86_64.whl (21.1 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 21.1/21.1 MB 78.0 MB/s eta 0:00:00
e-cu12, nvidia-cuda-nvrtc-cu12, nvidia-cuda-cupti-cu12, nvidia-cublas-cu12, nvidia-cusparse-cu12, nvidia-cudnn-cu12, nvidia-cusolver-cu12, bertopic
  Attempting uninstall: nvidia-nvjitlink-cu12
    Found existing installation: nvidia-nvjitlink-cu12 12.5.82
    Uninstalling nvidia-nvjitlink-cu12-12.5.82:
      Successfully uninstalled nvidia-nvjitlink-cu12-12.5.82
  Attempting uninstall: nvidia-curand-cu12
    Found existing installation: nvidia-curand-cu12 10.3.6.82
    Uninstalling nvidia-curand-cu12-10.3.6.82:
      Successfully uninstalled nvidia-curand-cu12-10.3.6.82
  Attempting uninstall: nvidia-cufft-cu12
    Found existing installation: nvidia-cufft-cu12 11.2.3.61
    Uninstalling nvidia-cufft-cu12-11.2.3.61:
      Successfully uninstalled nvidia-cufft-cu12-11.2.3.61
  Attempting uninstall: nvidia-cuda-runtime-cu12
    Found existing installation: nvidia-cuda-runtime-cu12 12.5.82
    Uninstalling nvidia-cuda-runtime-cu12-12.5.82:
      Successfully uninstalled nvidia-cuda-runtime-cu12-12.5.82
  Attempting uninstall: nvidia-cuda-nvrtc-cu12
    Found existing installation: nvidia-cuda-nvrtc-cu12 12.5.82
    Uninstalling nvidia-cuda-nvrtc-cu12-12.5.82:
      Successfully uninstalled nvidia-cuda-nvrtc-cu12-12.5.82
  Attempting uninstall: nvidia-cuda-cupti-cu12
    Found existing installation: nvidia-cuda-cupti-cu12 12.5.82
    Uninstalling nvidia-cuda-cupti-cu12-12.5.82:
      Successfully uninstalled nvidia-cuda-cupti-cu12-12.5.82
  Attempting uninstall: nvidia-cublas-cu12
    Found existing installation: nvidia-cublas-cu12 12.5.3.2
    Uninstalling nvidia-cublas-cu12-12.5.3.2:
      Successfully uninstalled nvidia-cublas-cu12-12.5.3.2
  Attempting uninstall: nvidia-cusparse-cu12
    Found existing installation: nvidia-cusparse-cu12 12.5.1.3
    Uninstalling nvidia-cusparse-cu12-12.5.1.3:
      Successfully uninstalled nvidia-cusparse-cu12-12.5.1.3
  Attempting uninstall: nvidia-cudnn-cu12
    Found existing installation: nvidia-cudnn-cu12 9.3.0.75
    Uninstalling nvidia-cudnn-cu12-9.3.0.75:
      Successfully uninstalled nvidia-cudnn-cu12-9.3.0.75
  Attempting uninstall: nvidia-cusolver-cu12
    Found existing installation: nvidia-cusolver-cu12 11.6.3.83
    Uninstalling nvidia-cusolver-cu12-11.6.3.83:
      Successfully uninstalled nvidia-cusolver-cu12-11.6.3.83
Successfully installed bertopic-0.16.4 nvidia-cublas-cu12-12.4.5.8 nvidia-cuda-cupti-cu12-12.4.127 nvidia-cuda-nvrtc-cu12-12.4.127 nvidia-cuda-runtime-cu12-12.4.127 nvidia-cudnn-cu12-9.1.0.70 nvidia-cufft-cu12-11.2.1.3 nvidia-curand-cu12-10.3.5.147 nvidia-cusolver-cu12-11.6.1.9 nvidia-cusparse-cu12-12.3.1.170 nvidia-nvjitlink-cu12-12.4.127
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="22"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:575,&quot;referenced_widgets&quot;:[&quot;c1d1ffdee7aa408cb4b457e5db4d235f&quot;,&quot;6527ea2531da474c8c47bddaec344268&quot;,&quot;24736c6972ce45a0a261d31bba2566b0&quot;,&quot;e726253f84dc4b1dab53b02e5d50e5f1&quot;,&quot;6d178f68bf484d178fbbc334a81f02ce&quot;,&quot;6ff585c9c47548e79119d86d5e8c8791&quot;,&quot;ef1fd191eda54dc88ee182858dee64f5&quot;,&quot;40fef1aa808c49758e9713f79b2cfc6c&quot;,&quot;2e510a92cde24061ba225130f1b93f2f&quot;,&quot;f2c2cc0eed1f4c7ba35ad8b3ff01cf0f&quot;,&quot;c840d9600d5e405ca2a6d48d1ae9ab46&quot;,&quot;f541dcece7dd471b8c1876efe91a1db3&quot;,&quot;5a2bda75d7f14d1f82e5282c03a12541&quot;,&quot;b97453e0a5db40808363a93b9811d0b1&quot;,&quot;8f4ac5b9701d498ea0d0ad7fbc995e49&quot;,&quot;e1630d02e7c049c8ab623ae26cea6a3d&quot;,&quot;7685b327cae247a78cb5e14caaa6a040&quot;,&quot;033614c075f7479682ba8542a667c6b5&quot;,&quot;31440a186c6341f397b95b0a988de0fb&quot;,&quot;1f09419af7a7467796296385e2b2c987&quot;,&quot;1a20de797216451395af5b0a643a4cf7&quot;,&quot;2ee18be83f35411dab1a13a61cffd3cd&quot;,&quot;4f85bcae44f44b6698e86b2ff3d67005&quot;,&quot;c85fc8b80e124217b81a6f5f689aacc2&quot;,&quot;3f71b780f5894f1c88e9ee0be8f8789e&quot;,&quot;cd3fd99b45054bd3a0e34871165ba0f5&quot;,&quot;f4a01c188855466ca6c04ef192bb6198&quot;,&quot;c162ad0f68c64bf7b8dda362c2d8c9f3&quot;,&quot;84379269a00e4483a74323496938019c&quot;,&quot;7150c85413bd4b6b82f0862976c4aa16&quot;,&quot;bb632d04e0194fd1aed4da526e379e9c&quot;,&quot;165b70f84bee431a9152f3f5e3e0d05d&quot;,&quot;7e35212ec88448ea999b25e2fd7622dd&quot;,&quot;c4cff19e62194d3f8d3721d76ab76a94&quot;,&quot;02c6e95ba2ed42c393cc14e4fb0ac1f7&quot;,&quot;c0cffa25199f4a2ca09ea8e929423cc0&quot;,&quot;dbfce33a13704112b1ca2a5453faca2c&quot;,&quot;59ba4410e6424cf9b7288c56ea3f9c6c&quot;,&quot;06a3358f776649e798477f0f8b2cd1c9&quot;,&quot;38ddb4cd214246a7bd05ab2f600cb03e&quot;,&quot;48a255da81f74740b033ac34ac70c690&quot;,&quot;5af0f579e91e45edbff90a26e3dc5066&quot;,&quot;7657e8477179409c880f41b79bda5234&quot;,&quot;a7f7ccb81fa949ee8fb68f8712803d52&quot;,&quot;add2500ef713491a9f25060d7b312264&quot;,&quot;079531e96b1d498db8114c349f8fc3e6&quot;,&quot;589798beed52460a87c994c3747f505e&quot;,&quot;f6568d77073e478db66d5eec4f09072d&quot;,&quot;b2546be96d5841dab2c597a34e619ddc&quot;,&quot;05965f70f6854d7b852a1fb0afa1b3ab&quot;,&quot;65c08696fb58455fb574e1594cf60af7&quot;,&quot;91748dd45fbf47099318972992ca9c34&quot;,&quot;cc1f7f4594514a8a8cbe1d4794b54e24&quot;,&quot;5760b6d8259d43aebdf4c5482889e3e0&quot;,&quot;dd09673f4b8a4f49b6a709923a5da2cb&quot;,&quot;6c6ba086bcb04dadbea1eadebfe61178&quot;,&quot;fe1d3679cde9400b94c0311d8591f65f&quot;,&quot;4c9c2944c9a7448692fc6f15c980945d&quot;,&quot;5d2726d53962462dbc76ca17d8e9f51a&quot;,&quot;b352d126be48429396d7de9a25eabaaf&quot;,&quot;bb52a000455a4db1b541759f225d0e3b&quot;,&quot;6ec33bebb88c478ba95420a121462b13&quot;,&quot;a65fa795c99243ccb33ebf1370846d3c&quot;,&quot;56009802102544ba80df992aa4ea73f7&quot;,&quot;eeeacdd1f92b4f4cbdd18a06fb1600ee&quot;,&quot;d074ff1a77c942d3b3ca877c56c89f63&quot;,&quot;2030bd2c52ef49109f9acd95da7b18a9&quot;,&quot;6fa7d57d7d3242229ab81a9ea122837b&quot;,&quot;93322142a31444989c3653a62632f5ce&quot;,&quot;dc22c55eb7414d8db5a5ef20d39ab62e&quot;,&quot;3a0a5d4f7c2a43a8b383398da34eecbe&quot;,&quot;5e203c6d340b45e59c4275c90a9f0b6a&quot;,&quot;28548ef5d14a4ef488db041736a5ad97&quot;,&quot;a4781164ef77448a996a503d2358b3e5&quot;,&quot;3d6fe1f45ecc453a8e76aadef4e080e9&quot;,&quot;939dd9dd3e214c1ea2c6551938ffb15b&quot;,&quot;18b97048e0df4b8a916612a847a6a856&quot;,&quot;0024511b5515467a8134aad41340e058&quot;,&quot;479c02565662415ba4173fdedf2ddaed&quot;,&quot;006db9b72c5e4b80a0ba875efae5f02b&quot;,&quot;2bbf9df46ba7490da7b7a74d49b71fe9&quot;,&quot;8a8b3be3faa048ae80097af019a9eaac&quot;,&quot;26efb1c9dff54e99b7b1551413f14b75&quot;,&quot;924416b594494b0f88ef4336dcc8e049&quot;,&quot;faeffab207d7409491b2587ac14c635e&quot;,&quot;c98086b5e919466897c3ee98d370696d&quot;,&quot;edd500a1bbf344ccabc4377e84680c64&quot;,&quot;aa999b51e7a0443a9915eacfd7d00ace&quot;,&quot;8f92e5229a9e48bfb18edbb7346593eb&quot;,&quot;c6edb8b9929042ec93fe04cc346432bc&quot;,&quot;eac07cb2cfbb4546baf944c7a7756dd1&quot;,&quot;6eeecda324b04a559e2ebba6f696c086&quot;,&quot;bba1772a75c9404689ef23de3fed1141&quot;,&quot;54a93052cd2442b782b079f46e250fec&quot;,&quot;93773d742f53443294cbc36d4d9b2360&quot;,&quot;3d01fe9db07f4d3191fa58ffe882be70&quot;,&quot;57a322f7d23743ae900b863f820528b9&quot;,&quot;d617469341f04177af00651775d61281&quot;,&quot;77dad08a19d440e3b81c6e7e2bd7cf90&quot;,&quot;f965fc11268141de9d428cffeadefc78&quot;,&quot;5b2f1a634e604dca8e8a93e3fd5c50aa&quot;,&quot;277466161df64659bc7c7f30ce4242ed&quot;,&quot;0f313d6eb6d84201b57a6bf589a0a076&quot;,&quot;f109688ef3934a24b9ad7dc13588fe7d&quot;,&quot;aaaa1fb432264393a76eeba56ed57e79&quot;,&quot;e6421e698b244a89b0939c43ec286fd5&quot;,&quot;588932f6aa38453a9ebb79ae7aa418f1&quot;,&quot;020ff2f835b94b789d26dad283d10460&quot;,&quot;a921291facfe4b5f96d003d5f62494d2&quot;,&quot;5f008fc3922e4719bc1c51cb052ad30c&quot;,&quot;3cf376b1da5541928ad2eced8d49dda3&quot;,&quot;6e0eb35af99747dd833f9ece9b6f6b9c&quot;,&quot;ce67a6a49789450ebe0dd0c7d25ba7c5&quot;,&quot;ca7aa38f826e4dbe9ebb67a43e4d38d6&quot;,&quot;8077a963da2e48279ea9ba9ed1cfad84&quot;,&quot;a882eade94de47ee883c599dfdd12568&quot;,&quot;529c66d91c2546b5bec2276fa148aaf1&quot;,&quot;dcfe58e59f0b449da7db51f09aa21958&quot;,&quot;269d1f802f724c85995ff6c2558d0ec5&quot;,&quot;829398703a704155872a6081b275db99&quot;,&quot;7e912c5b377542a19a37b0388eb1481b&quot;,&quot;f0a5aada1f76417b92f7bc27b4d4de42&quot;,&quot;372c1c32447741f6a8a7f8a40e944b4b&quot;,&quot;07f95f48683740019b4a3ece9b11a435&quot;,&quot;57cf8452d15341d3abc2f96380b7aa6a&quot;,&quot;d41b4f65ff614594b9a07f975d9d0cd3&quot;,&quot;ff2b6114f2274a6db867f2d418cd1118&quot;,&quot;4bc6d857497e4898a764e3fd6cac2aca&quot;,&quot;cf4b1afbbfd64eda855f4effb2b5b476&quot;,&quot;d65b1da9cb024a97a8fa12daf556a361&quot;,&quot;3f02b8040fdf404d827cd34cac5576ac&quot;,&quot;99db1d7e595a4423bd85d16c8c46ae81&quot;]}"
id="Io_EwMNkD-wP" data-outputId="086f7cda-4f96-45d3-8558-95a92c9a9ea7">
<div class="sourceCode" id="cb35"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bertopic <span class="im">import</span> BERTopic</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> BERTopic(verbose<span class="op">=</span><span class="va">True</span>,embedding_model<span class="op">=</span><span class="st">&#39;paraphrase-MiniLM-L3-v2&#39;</span>, min_topic_size<span class="op">=</span> <span class="dv">7</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>headline_topics, _ <span class="op">=</span> model.fit_transform(data.text)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>2025-03-05 21:36:00,113 - BERTopic - Embedding - Transforming documents to embeddings.
</code></pre>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb37"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;c1d1ffdee7aa408cb4b457e5db4d235f&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb38"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;f541dcece7dd471b8c1876efe91a1db3&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb39"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;4f85bcae44f44b6698e86b2ff3d67005&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb40"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;c4cff19e62194d3f8d3721d76ab76a94&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb41"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;add2500ef713491a9f25060d7b312264&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb42"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;6c6ba086bcb04dadbea1eadebfe61178&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb43"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;2030bd2c52ef49109f9acd95da7b18a9&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb44"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;0024511b5515467a8134aad41340e058&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb45"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;8f92e5229a9e48bfb18edbb7346593eb&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb46"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;f965fc11268141de9d428cffeadefc78&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb47"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;3cf376b1da5541928ad2eced8d49dda3&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb48"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;f0a5aada1f76417b92f7bc27b4d4de42&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output stream stderr">
<pre><code>2025-03-05 21:45:32,926 - BERTopic - Embedding - Completed ✓
2025-03-05 21:45:32,927 - BERTopic - Dimensionality - Fitting the dimensionality reduction algorithm
2025-03-05 21:46:31,158 - BERTopic - Dimensionality - Completed ✓
2025-03-05 21:46:31,161 - BERTopic - Cluster - Start clustering the reduced embeddings
2025-03-05 21:46:39,577 - BERTopic - Cluster - Completed ✓
2025-03-05 21:46:39,594 - BERTopic - Representation - Extracting topics from clusters using representation models.
2025-03-05 21:46:41,284 - BERTopic - Representation - Completed ✓
</code></pre>
</div>
<div class="output stream stdout">
<pre><code>CPU times: user 10min 45s, sys: 27.1 s, total: 11min 12s
Wall time: 11min 36s
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="23" id="Oe01KYLQzFzq">
<div class="sourceCode" id="cb51"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> umap <span class="im">import</span> UMAP</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># UMAP (Uniform Manifold Approximation and Projection) is a dimensionality reduction technique used in conjunction with BERTopic to visualize high-dimensional data in a lower-dimensional space.</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># BERTopic employs UMAP to project the embeddings of documents into a 2D or 3D space, making it easier to interpret and explore the relationships between topics.</span></span></code></pre></div>
</div>
<div class="cell code" data-execution_count="24"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:369,&quot;referenced_widgets&quot;:[&quot;3d61383222244e20bd61f0825aa46c25&quot;,&quot;dade3310cc16455ba69922029014c5b6&quot;,&quot;3cbb19e9ba6c4c7d8099f261830ab92e&quot;,&quot;64081a7f702349109dfbaad417b8da09&quot;,&quot;978d22ee6f65455ba2a9d63f7cf80240&quot;,&quot;30a532e92fb74b35b4bdc037b9e0b4e1&quot;,&quot;7171a39c90344366a4daeca0a550101e&quot;,&quot;2841888186e44be487e43c923714ba79&quot;,&quot;940489df9c0e4ec18d27d7cd4a4439aa&quot;,&quot;ce21e4b870c44fb2b3a93fa9a3ee76c1&quot;,&quot;b2c06469ad65423589c71851fb1aaeb8&quot;,&quot;7aba2750619240b3a3849ab35513058f&quot;,&quot;44d3c4c0d8be4caf8dfb2a44f03371f1&quot;,&quot;249a1a9396f34d9c88f7f7abbe5f0c7c&quot;,&quot;f838c3b935f24a7aa5cd520292290434&quot;,&quot;0c88442472b5456fbf7e6df3ea21049c&quot;,&quot;612bc499348d471598daa333c2b5de1c&quot;,&quot;d52fdbe4ae6e4a94acd7e9a50aeb2f53&quot;,&quot;0c9c6fa8e7da4801bb8c0f9ca0b269a4&quot;,&quot;dc783829bc724989a52642ec111673d8&quot;,&quot;92427a79cc274610a2055b0a9165133c&quot;,&quot;8d9a28badbee4c95a09c51e5d2ac8ef9&quot;,&quot;0c20a3fc759444d4b6792f9a1671523f&quot;,&quot;3f118a035d7749f4a3967f9b662e763a&quot;,&quot;811695a50aee4613a35195e2bcd2aabb&quot;,&quot;69bb0e69ca4a41f1b432b8cf2474b32c&quot;,&quot;cfbb5da353d8438f85f65f26cf37c669&quot;,&quot;a3f2e45b2e58471c82416ae53a8a1667&quot;,&quot;0cd9f1c054a643c0b9bc5a3e733adf97&quot;,&quot;899c5dbc17d446249baf30c13ded3bf6&quot;,&quot;730589d0ec2d4584b74397434df83021&quot;,&quot;356cb7996f824215a1ef3d1a38636111&quot;,&quot;7444f4d8af8947fe84f1ecbc7b58480e&quot;,&quot;9202e8ddaa5e4906b48593407072dfba&quot;,&quot;17efd8c3dc254859998c6deb38b064c8&quot;,&quot;ab7ef390029c4cbfaccdf5087138b944&quot;,&quot;7beb6a2617ea47d2aaaad38070c737e4&quot;,&quot;be65ba7400ce42a3999c623bb302dcfe&quot;,&quot;6e55211afd0b4e63a4009c7415fa155d&quot;,&quot;4db26a3020134fed912271b2e751dbe3&quot;,&quot;69ca3d0ca6c84e4a8e2ddde1228ecfef&quot;,&quot;125448af08a74e01b0b7de651a0a0850&quot;,&quot;fef8a3be5faa4f4a8fa3c77e6ce98032&quot;,&quot;cacd0f75c5f2490cb560f84c5ffbd667&quot;,&quot;816af1e9a39d46a99759247ad675a555&quot;,&quot;f58dff9d0ee945e6babf33c198c20050&quot;,&quot;6d30ba07f2924d30a11e9a02d753284b&quot;,&quot;533cf850bb9344b29735e316ac0e68f5&quot;,&quot;236b5fbee4a74207b2f29799d2e85242&quot;,&quot;9699661df3e54099b2ce344c889527b9&quot;,&quot;b854f1da0f7f4dbcb5eaffeaffb66160&quot;,&quot;8efc5539bca24f819d5e380c77a3f2f7&quot;,&quot;6b832c2df0ad4a3a8071daaa65e40f7e&quot;,&quot;8eb433e060a74c86b68a88cca9b4a010&quot;,&quot;ff4b9c54cd8242f083ee70c3f000bbe3&quot;,&quot;6dd8e21f1a2447189522f4a5fc36770a&quot;,&quot;7ccb23eabfee4d68af96446834d7bf7e&quot;,&quot;60eed07aa3e1470f968269a46023fd9b&quot;,&quot;6fbc0340d076416faf190eaffa1594ba&quot;,&quot;320df705f9874e1f9731130118d6ebfc&quot;,&quot;2b93aa6b87424fd19ac560eca0bba64a&quot;,&quot;82080c1671a441be9beecd2de04f9345&quot;,&quot;9bef93bc23d24635a95d78d215ed8562&quot;,&quot;2bd23f20fbdd4676a105deeff33b4b69&quot;,&quot;3d2b43df9a5d4ede9f05de55a6ed99b8&quot;,&quot;fc3063afe19846c08ecd42940a408dde&quot;,&quot;90115b5701174c30a735ff8bbd5f8e2a&quot;,&quot;e17a5811186b429ea3127a9373021fdd&quot;,&quot;c2efb2f875464ebfa28f69285618724c&quot;,&quot;e4bed219a36e4d38b3f10aa13cbafad7&quot;,&quot;cc9ca3494ed3445f9d12a9d050354306&quot;,&quot;560b9143b46e442e91d34ee6296c8f97&quot;,&quot;79412f620b714b6da1e615131fb3a220&quot;,&quot;f33f0a7f38964d8a869211b7faec9fe4&quot;,&quot;72c01301a1514c32a5e4892395a3f67a&quot;,&quot;db900f78b0474851bbd4aba00323894d&quot;,&quot;b8d148c10a70458ebef0479d4bdfa8b6&quot;,&quot;738829e953fb48bfbd2d18dd2ea4683c&quot;,&quot;0f55f1e315174bd48f6ddb4b041c679a&quot;,&quot;20f02cf8ffce498aa536945eb421a539&quot;,&quot;55178a957a9942a0af036329d9cb9614&quot;,&quot;1a10505e47904e81913bc644f146621b&quot;,&quot;bb078f5e8b80441191912258429bab95&quot;,&quot;55c3c23df3614182adc94e1e57182544&quot;,&quot;9da5c1b7ac90478cb8ebdd2d290703c1&quot;,&quot;caaa3dbef8f94afe9855c01726778c5b&quot;,&quot;9407e9f1a9da44bdaedb3bf6b6c9b835&quot;,&quot;7559634dab4045ffad7917f7a43ae26f&quot;,&quot;9f8d2ace0ffa44c99008ff971f8699c8&quot;,&quot;5c16da8aaf324b839b8e0248cbc77b95&quot;,&quot;81d4346e9d51403f82073121cc550070&quot;,&quot;647bd7e358644feba6f0b7e50bba3702&quot;,&quot;c975eed6c46144119fb826470397c319&quot;,&quot;dcfa6fe08b9548a9a888bd8d145a35f5&quot;,&quot;d3615b20b8cb48f0a027e9cdeaa41b79&quot;,&quot;d93516c236fe4295a9a76e54f3003db7&quot;,&quot;25245a5bbc6b44518118d8b43ff78846&quot;,&quot;423c1d3357bd441d8b6a5d968cfa4d51&quot;,&quot;b41dc72ec73e49c68f8a411a26437b51&quot;,&quot;74c88ddfb08c4b57ac365f1515e472c2&quot;,&quot;0e4996d7d68544618b14f337d50ecc1b&quot;,&quot;7bf810dcffe049108d67bb232a90ae6c&quot;,&quot;03dfa28ca9fb4241b489b61da03af772&quot;,&quot;7de0664a458a4f80a7774e3faf8024f6&quot;,&quot;cfaed0417aa34931aa9b097a266625c6&quot;,&quot;adf48149e3554379aefca277a32ecaf5&quot;,&quot;33fe4588c685420e86d1c8eff2055fd7&quot;,&quot;d05eee4432b64b4d80fa282c2ff22a5a&quot;,&quot;0d6cd4d635b0405888901ffe1494343f&quot;,&quot;5610767fcec040659f1c1823231e42cb&quot;,&quot;650dd8b9a9eb40a18bfd97c1d526fa18&quot;,&quot;8cd27ad9b95e48568ac961bcd01211e4&quot;,&quot;c3338ae725154d9c9e24338362ea3253&quot;,&quot;7b582b89559848efa2fd3b07cead3ec9&quot;,&quot;aa89f6d2361940c88ab3dfacd0b7abe6&quot;,&quot;73cb0e73487c4032a838d8d92dbf4372&quot;,&quot;5ebf8bc4f9f44f5190db5dfcdb1ad82c&quot;,&quot;9032451ab0254637a1bd9580f544ce68&quot;,&quot;d81cb45526364d038f83205327fa815e&quot;,&quot;c564b0348ea44b55aa98311c81a59ffe&quot;,&quot;2cd5076946f4439781a7cb625cc9d8ec&quot;]}"
id="GB694XoaynGN" data-outputId="58c0f5be-e7fa-4283-ed75-5a3ac6f16e70">
<div class="sourceCode" id="cb52"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate UMAP</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>umap_model <span class="op">=</span> UMAP(n_neighbors<span class="op">=</span><span class="dv">15</span>,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                  n_components<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                  min_dist<span class="op">=</span><span class="fl">0.0</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                  metric<span class="op">=</span><span class="st">&#39;cosine&#39;</span>,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>                  random_state<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate BERTopic</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> BERTopic(umap_model<span class="op">=</span>umap_model, language<span class="op">=</span><span class="st">&quot;english&quot;</span>, calculate_probabilities<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Run BERTopic model</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>headline_topics, probabilities <span class="op">=</span> model.fit_transform(data.text)</span></code></pre></div>
<div class="output display_data">
<div class="sourceCode" id="cb53"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;3d61383222244e20bd61f0825aa46c25&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb54"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;7aba2750619240b3a3849ab35513058f&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb55"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;0c20a3fc759444d4b6792f9a1671523f&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb56"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;9202e8ddaa5e4906b48593407072dfba&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb57"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;816af1e9a39d46a99759247ad675a555&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb58"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;6dd8e21f1a2447189522f4a5fc36770a&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb59"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;90115b5701174c30a735ff8bbd5f8e2a&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb60"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;738829e953fb48bfbd2d18dd2ea4683c&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb61"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;9f8d2ace0ffa44c99008ff971f8699c8&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb62"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;74c88ddfb08c4b57ac365f1515e472c2&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb63"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;650dd8b9a9eb40a18bfd97c1d526fa18&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
</div>
<div class="cell code" data-execution_count="26"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:224}"
id="GKTtiX_nENXk" data-outputId="8f531950-9d7a-48b5-9be4-e04d0ef835a2">
<div class="sourceCode" id="cb64"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>freq <span class="op">=</span> model.get_topic_info()</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Number of topics: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>( <span class="bu">len</span>(freq)))</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>freq.head()</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Number of topics: 153
</code></pre>
</div>
<div class="output execute_result" data-execution_count="26">

  <div id="df-e74757d9-b633-4e7b-b054-43b414c65d2c" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Topic</th>
      <th>Count</th>
      <th>Name</th>
      <th>Representation</th>
      <th>Representative_Docs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-1</td>
      <td>13670</td>
      <td>-1_the_and_to_my</td>
      <td>[the, and, to, my, was, is, of, it, this, in]</td>
      <td>[I am a regular at Starbucks.  5 days a week I...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>611</td>
      <td>0_best_favorite_love_starbucks</td>
      <td>[best, favorite, love, starbucks, always, are,...</td>
      <td>[My absolute favorite starbucks. The baristas ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>348</td>
      <td>1_baristas_barista_always_are</td>
      <td>[baristas, barista, always, are, friendly, gre...</td>
      <td>[Always excellent service ! I stop here often ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>338</td>
      <td>2_bathroom_dirty_please_bathrooms</td>
      <td>[bathroom, dirty, please, bathrooms, toilet, f...</td>
      <td>[Place is dirty. Tables and chairs and floors ...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>294</td>
      <td>3_parking_lot_is_park</td>
      <td>[parking, lot, is, park, starbucks, the, you, ...</td>
      <td>[This a very friendly and clean Starbucks.  My...</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-e74757d9-b633-4e7b-b054-43b414c65d2c')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-e74757d9-b633-4e7b-b054-43b414c65d2c button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-e74757d9-b633-4e7b-b054-43b414c65d2c');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-0c82462a-e14c-4376-94c4-316859373775">
  <button class="colab-df-quickchart" onclick="quickchart('df-0c82462a-e14c-4376-94c4-316859373775')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-0c82462a-e14c-4376-94c4-316859373775 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="27"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="K_biPxPZD7uS" data-outputId="71ab7abb-6fcf-4e76-d010-1d7124df81f5">
<div class="sourceCode" id="cb66"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>a_topic <span class="op">=</span> freq.iloc[<span class="dv">1</span>][<span class="st">&quot;Topic&quot;</span>] <span class="co"># Select the 1st topic</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>model.get_topic(a_topic) <span class="co"># Show the words and their c-TF-IDF scores</span></span></code></pre></div>
<div class="output execute_result" data-execution_count="27">
<pre><code>[(&#39;best&#39;, 0.014645802742505758),
 (&#39;favorite&#39;, 0.011955220288886272),
 (&#39;love&#39;, 0.011954873793202737),
 (&#39;starbucks&#39;, 0.011851574105379509),
 (&#39;always&#39;, 0.01140313176043078),
 (&#39;are&#39;, 0.00935070987568669),
 (&#39;friendly&#39;, 0.009319756645638945),
 (&#39;great&#39;, 0.008356057108125628),
 (&#39;is&#39;, 0.00807083417862611),
 (&#39;my&#39;, 0.007729681492910053)]</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="28"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:517}"
id="6wwCFR5zEaMn" data-outputId="3106f67e-ebe9-4a93-a423-58ac25783259">
<div class="sourceCode" id="cb68"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>model.visualize_barchart(top_n_topics<span class="op">=</span><span class="dv">6</span>)</span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="8360c953-76c9-45e1-a83f-720affedb77a" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("8360c953-76c9-45e1-a83f-720affedb77a")) {                    Plotly.newPlot(                        "8360c953-76c9-45e1-a83f-720affedb77a",                        [{"marker":{"color":"#D55E00"},"orientation":"h","x":[0.01140313176043078,0.011851574105379509,0.011954873793202737,0.011955220288886272,0.014645802742505758],"y":["always  ","starbucks  ","love  ","favorite  ","best  "],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#0072B2"},"orientation":"h","x":[0.009124005064125229,0.009741986933839101,0.010010420641357787,0.013434482161318703,0.028202439754003494],"y":["friendly  ","are  ","always  ","barista  ","baristas  "],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#CC79A7"},"orientation":"h","x":[0.012037273153635215,0.012365799891371921,0.015154121939460372,0.019162040205431486,0.02273032784069968],"y":["toilet  ","bathrooms  ","please  ","dirty  ","bathroom  "],"type":"bar","xaxis":"x3","yaxis":"y3"},{"marker":{"color":"#E69F00"},"orientation":"h","x":[0.007318208311751397,0.008896950708961364,0.009004406872117855,0.013710691031400912,0.02719024239061887],"y":["starbucks  ","park  ","is  ","lot  ","parking  "],"type":"bar","xaxis":"x4","yaxis":"y4"},{"marker":{"color":"#56B4E9"},"orientation":"h","x":[0.01335568382833314,0.01498330168174009,0.023968675095316513,0.03316107544752933,0.034043862926026805],"y":["pm  ","closing  ","hours  ","open  ","closed  "],"type":"bar","xaxis":"x5","yaxis":"y5"},{"marker":{"color":"#009E73"},"orientation":"h","x":[0.012401479295098182,0.013542461298429101,0.014213454443108979,0.014658190533525609,0.014661927417055664],"y":["seating  ","nice  ","friendly  ","staff  ","location  "],"type":"bar","xaxis":"x6","yaxis":"y6"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.175],"showgrid":true},"yaxis":{"anchor":"x","domain":[0.6000000000000001,1.0],"showgrid":true},"xaxis2":{"anchor":"y2","domain":[0.275,0.45],"showgrid":true},"yaxis2":{"anchor":"x2","domain":[0.6000000000000001,1.0],"showgrid":true},"xaxis3":{"anchor":"y3","domain":[0.55,0.7250000000000001],"showgrid":true},"yaxis3":{"anchor":"x3","domain":[0.6000000000000001,1.0],"showgrid":true},"xaxis4":{"anchor":"y4","domain":[0.825,1.0],"showgrid":true},"yaxis4":{"anchor":"x4","domain":[0.6000000000000001,1.0],"showgrid":true},"xaxis5":{"anchor":"y5","domain":[0.0,0.175],"showgrid":true},"yaxis5":{"anchor":"x5","domain":[0.0,0.4],"showgrid":true},"xaxis6":{"anchor":"y6","domain":[0.275,0.45],"showgrid":true},"yaxis6":{"anchor":"x6","domain":[0.0,0.4],"showgrid":true},"xaxis7":{"anchor":"y7","domain":[0.55,0.7250000000000001],"showgrid":true},"yaxis7":{"anchor":"x7","domain":[0.0,0.4],"showgrid":true},"xaxis8":{"anchor":"y8","domain":[0.825,1.0],"showgrid":true},"yaxis8":{"anchor":"x8","domain":[0.0,0.4],"showgrid":true},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Topic 0","x":0.0875,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Topic 1","x":0.36250000000000004,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Topic 2","x":0.6375000000000001,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Topic 3","x":0.9125,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Topic 4","x":0.0875,"xanchor":"center","xref":"paper","y":0.4,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Topic 5","x":0.36250000000000004,"xanchor":"center","xref":"paper","y":0.4,"yanchor":"bottom","yref":"paper"}],"title":{"font":{"size":22,"color":"Black"},"text":"Topic Word Scores","x":0.5,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"showlegend":false,"width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('8360c953-76c9-45e1-a83f-720affedb77a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="29"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:667}"
id="AAUQe1jxEhK9" data-outputId="f9b869c3-65a8-4915-a644-2ee2852f1579">
<div class="sourceCode" id="cb69"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#embed c-TF-IDF representation of the topics in 2D using UMAP and then visualize the two dimensions</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>model.visualize_topics(top_n_topics<span class="op">=</span><span class="dv">6</span>)</span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="4db63c84-cb53-418c-a9ed-57a97b940b9b" class="plotly-graph-div" style="height:650px; width:650px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("4db63c84-cb53-418c-a9ed-57a97b940b9b")) {                    Plotly.newPlot(                        "4db63c84-cb53-418c-a9ed-57a97b940b9b",                        [{"customdata":[[0,"best | favorite | love | starbucks | always",611],[1,"baristas | barista | always | are | friendly",348],[2,"bathroom | dirty | please | bathrooms | toilet",338],[3,"parking | lot | is | park | starbucks",294],[4,"closed | open | hours | closing | pm",255],[5,"location | staff | friendly | nice | seating",241]],"hovertemplate":"\u003cb\u003eTopic %{customdata[0]}\u003c\u002fb\u003e\u003cbr\u003e%{customdata[1]}\u003cbr\u003eSize: %{customdata[2]}","legendgroup":"","marker":{"color":"#B0BEC5","size":[611,348,338,294,255,241],"sizemode":"area","sizeref":0.381875,"symbol":"circle","line":{"color":"DarkSlateGrey","width":2}},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[11.259125,11.174718,10.345394,10.7991085,10.167151,11.171156],"xaxis":"x","y":[0.2870731,1.2597114,-0.8683595,-0.39132085,0.007065488,1.8452252],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":""},"visible":false,"range":[8.642078733444214,12.94799346923828]},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":""},"visible":false,"range":[-0.9986134320497513,2.1220089972019194]},"legend":{"tracegroupgap":0,"itemsizing":"constant"},"margin":{"t":60},"title":{"font":{"size":22,"color":"Black"},"text":"\u003cb\u003eIntertopic Distance Map\u003c\u002fb\u003e","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"width":650,"height":650,"sliders":[{"active":0,"pad":{"t":50},"steps":[{"args":[{"marker.color":[["red","#B0BEC5","#B0BEC5","#B0BEC5","#B0BEC5","#B0BEC5"]]}],"label":"Topic 0","method":"update"},{"args":[{"marker.color":[["#B0BEC5","red","#B0BEC5","#B0BEC5","#B0BEC5","#B0BEC5"]]}],"label":"Topic 1","method":"update"},{"args":[{"marker.color":[["#B0BEC5","#B0BEC5","red","#B0BEC5","#B0BEC5","#B0BEC5"]]}],"label":"Topic 2","method":"update"},{"args":[{"marker.color":[["#B0BEC5","#B0BEC5","#B0BEC5","red","#B0BEC5","#B0BEC5"]]}],"label":"Topic 3","method":"update"},{"args":[{"marker.color":[["#B0BEC5","#B0BEC5","#B0BEC5","#B0BEC5","red","#B0BEC5"]]}],"label":"Topic 4","method":"update"},{"args":[{"marker.color":[["#B0BEC5","#B0BEC5","#B0BEC5","#B0BEC5","#B0BEC5","red"]]}],"label":"Topic 5","method":"update"}]}],"shapes":[{"line":{"color":"#CFD8DC","width":2},"type":"line","x0":10.795036101341246,"x1":10.795036101341246,"y0":-0.9986134320497513,"y1":2.1220089972019194},{"line":{"color":"#9E9E9E","width":2},"type":"line","x0":8.642078733444214,"x1":12.94799346923828,"y0":0.561697782576084,"y1":0.561697782576084}],"annotations":[{"showarrow":false,"text":"D1","x":8.642078733444214,"y":0.561697782576084,"yshift":10},{"showarrow":false,"text":"D2","x":10.795036101341246,"xshift":10,"y":2.1220089972019194}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('4db63c84-cb53-418c-a9ed-57a97b940b9b');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="30"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:307}"
id="WYm6uVjDF4TC" data-outputId="9ae52232-2155-4d63-936b-857ed6fcb4e7">
<div class="sourceCode" id="cb70"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#show all hierarchy</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co">#model.visualize_hierarchy()</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#show top 6 topics</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>model.visualize_hierarchy(top_n_topics<span class="op">=</span><span class="dv">6</span>)</span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="f929effe-1d9f-4152-a2ed-7f348b3d8b8a" class="plotly-graph-div" style="height:290px; width:1000px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f929effe-1d9f-4152-a2ed-7f348b3d8b8a")) {                    Plotly.newPlot(                        "f929effe-1d9f-4152-a2ed-7f348b3d8b8a",                        [{"hoverinfo":"text","marker":{"color":"rgb(61,153,112)"},"mode":"lines","x":[0.0,0.20888707994231215,0.20888707994231215,0.0],"xaxis":"x","y":[-15.0,-15.0,-25.0,-25.0],"yaxis":"y","type":"scatter"},{"hoverinfo":"text","marker":{"color":"rgb(61,153,112)"},"mode":"lines","x":[0.0,0.3633949005701014,0.3633949005701014,0.0],"xaxis":"x","y":[-35.0,-35.0,-45.0,-45.0],"yaxis":"y","type":"scatter"},{"hoverinfo":"text","marker":{"color":"rgb(61,153,112)"},"mode":"lines","x":[0.20888707994231215,0.4290891143254105,0.4290891143254105,0.3633949005701014],"xaxis":"x","y":[-20.0,-20.0,-40.0,-40.0],"yaxis":"y","type":"scatter"},{"hoverinfo":"text","marker":{"color":"rgb(61,153,112)"},"mode":"lines","x":[0.4290891143254105,0.5937506093329757,0.5937506093329757,0.0],"xaxis":"x","y":[-30.0,-30.0,-55.0,-55.0],"yaxis":"y","type":"scatter"},{"hoverinfo":"text","marker":{"color":"rgb(61,153,112)"},"mode":"lines","x":[0.0,0.7018431345452889,0.7018431345452889,0.5937506093329757],"xaxis":"x","y":[-5.0,-5.0,-42.5,-42.5],"yaxis":"y","type":"scatter"}],                        {"autosize":false,"height":290,"hovermode":"closest","showlegend":false,"width":1000,"xaxis":{"mirror":"allticks","rangemode":"tozero","showgrid":false,"showline":true,"showticklabels":true,"ticks":"outside","type":"linear","zeroline":false},"yaxis":{"mirror":"allticks","rangemode":"tozero","showgrid":false,"showline":true,"showticklabels":true,"tickmode":"array","ticks":"outside","ticktext":["4_closed_open_hours","1_baristas_barista_always","0_best_favorite_love","5_location_staff_friendly","3_parking_lot_is","2_bathroom_dirty_please"],"tickvals":[-5.0,-15.0,-25.0,-35.0,-45.0,-55.0],"type":"linear","zeroline":false,"range":[-60.0,0.0]},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"font":{"size":22,"color":"Black"},"text":"\u003cb\u003eHierarchical Clustering\u003c\u002fb\u003e","x":0.5,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"plot_bgcolor":"#ECEFF1"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f929effe-1d9f-4152-a2ed-7f348b3d8b8a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="31"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:817}"
id="Vd1zJfJ6HFTh" data-outputId="d47182de-c063-4bd8-e297-4432d76827e9">
<div class="sourceCode" id="cb71"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>model.visualize_heatmap(top_n_topics<span class="op">=</span><span class="dv">30</span>)</span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="0e3c140b-6abf-43a2-bf96-c6d1e553fad3" class="plotly-graph-div" style="height:800px; width:800px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("0e3c140b-6abf-43a2-bf96-c6d1e553fad3")) {                    Plotly.newPlot(                        "0e3c140b-6abf-43a2-bf96-c6d1e553fad3",                        [{"coloraxis":"coloraxis","name":"0","x":["0_best_favorite_love","1_baristas_barista_always","2_bathroom_dirty_please","3_parking_lot_is","4_closed_open_hours","5_location_staff_friendly","6_slowest_ever_minutes","7_coffee_espresso_starbucks","8_stars_star_give","9_slow_drive_thru","10_seating_tables_chairs","11_mobile_app_order","12_mobile_order_app","13_study_studying_students","14_sandwich_bacon_breakfast","15_she_her_me","16_great_service_customer","17_wifi_internet_free","18_starbuck_louis_saint","19_tampa_south_starbucks","20_rude_her_she","21_tucson_favorite_starbucks","22_coffee_minutes_wait","23_worst_ever_starbucks","24_drinks_great_love","25_dog_pup_dogs","26_airport_terminal_flight","27_drink_drinks_wrong","28_service_customer_rude","29_decaf_caffeine_americano"],"y":["0_best_favorite_love","1_baristas_barista_always","2_bathroom_dirty_please","3_parking_lot_is","4_closed_open_hours","5_location_staff_friendly","6_slowest_ever_minutes","7_coffee_espresso_starbucks","8_stars_star_give","9_slow_drive_thru","10_seating_tables_chairs","11_mobile_app_order","12_mobile_order_app","13_study_studying_students","14_sandwich_bacon_breakfast","15_she_her_me","16_great_service_customer","17_wifi_internet_free","18_starbuck_louis_saint","19_tampa_south_starbucks","20_rude_her_she","21_tucson_favorite_starbucks","22_coffee_minutes_wait","23_worst_ever_starbucks","24_drinks_great_love","25_dog_pup_dogs","26_airport_terminal_flight","27_drink_drinks_wrong","28_service_customer_rude","29_decaf_caffeine_americano"],"z":[[1.0000002,0.81695235,0.6812934,0.8465512,0.5967163,0.66264,0.77138615,0.8591929,0.7757461,0.43771854,0.8904007,0.63588786,0.4078098,0.8598217,0.5710101,0.54391235,0.6166586,0.7363312,0.79621077,0.84804845,0.7304311,0.8513651,0.6325159,0.86812633,0.79679966,0.79437876,0.8284353,0.5629362,0.46700683,0.61749995],[0.81695235,1.0000001,0.67561316,0.71974635,0.6062364,0.7142041,0.6381111,0.70742565,0.7222048,0.53073555,0.73639715,0.6085727,0.5020032,0.72256273,0.63578117,0.5594444,0.70045835,0.6341684,0.70499796,0.71142286,0.6695237,0.73810196,0.6759765,0.69781864,0.8077771,0.7128211,0.7416223,0.63870436,0.5702143,0.5722961],[0.6812934,0.67561316,0.9999999,0.7399473,0.61916375,0.635249,0.6368952,0.6809707,0.64856756,0.48602778,0.7197194,0.60657614,0.4308542,0.6713133,0.545449,0.6250043,0.50254625,0.621631,0.624177,0.6778516,0.7197397,0.63217795,0.64289665,0.7327473,0.6440445,0.65352964,0.6755185,0.5905334,0.5958812,0.5950607],[0.8465512,0.71974635,0.7399473,0.9999999,0.66114426,0.6551176,0.77861637,0.78667045,0.71608096,0.55860996,0.8723023,0.66556525,0.44419926,0.81127656,0.49622858,0.57094646,0.45708483,0.7622712,0.7568499,0.8386494,0.72811997,0.7835343,0.6742439,0.8241866,0.6820756,0.7266351,0.8123379,0.5065558,0.48607624,0.5739877],[0.5967163,0.6062364,0.61916375,0.66114426,1.0000002,0.5198816,0.6445695,0.58798647,0.6030844,0.6069133,0.5807015,0.6869384,0.60659647,0.56932414,0.5232171,0.5320287,0.47132927,0.5779548,0.5845808,0.60368574,0.6023481,0.58454454,0.7366459,0.61453676,0.5621659,0.55589724,0.6388693,0.57117033,0.56759214,0.5547159],[0.66264,0.7142041,0.635249,0.6551176,0.5198816,1.0,0.44201842,0.42427057,0.50349903,0.5389757,0.7267966,0.38011998,0.40892997,0.64924896,0.4866442,0.31258678,0.73804903,0.6093021,0.63876116,0.6351331,0.43124622,0.632846,0.4973086,0.50487006,0.8078582,0.60151094,0.5993804,0.3984728,0.5744747,0.31589276],[0.77138615,0.6381111,0.6368952,0.77861637,0.6445695,0.44201842,0.9999998,0.80049,0.7236231,0.7269473,0.7136683,0.7781259,0.57646585,0.71755576,0.54480124,0.5723255,0.41177434,0.69463015,0.67794377,0.73229945,0.68803775,0.6965342,0.82939875,0.8431965,0.5820328,0.64165604,0.7759984,0.58834517,0.4957894,0.6504941],[0.8591929,0.70742565,0.6809707,0.78667045,0.58798647,0.42427057,0.80049,0.9999997,0.78243005,0.41056922,0.7911389,0.7214234,0.42898715,0.784738,0.58250153,0.63079375,0.3914824,0.683437,0.72056645,0.7770709,0.76269674,0.7737982,0.69788444,0.8777317,0.6485597,0.7123651,0.8040411,0.649765,0.4526403,0.7674314],[0.7757461,0.7222048,0.64856756,0.71608096,0.6030844,0.50349903,0.7236231,0.78243005,1.0000002,0.49723315,0.71343327,0.66837037,0.4828288,0.684993,0.56852615,0.59195566,0.5425516,0.62424153,0.82992256,0.6852882,0.689307,0.71870327,0.6481652,0.7752774,0.67101026,0.67414623,0.7435001,0.6687596,0.550822,0.62930685],[0.43771854,0.53073555,0.48602778,0.55860996,0.6069133,0.5389757,0.7269473,0.41056922,0.49723315,0.9999999,0.4059431,0.6410666,0.6930722,0.40457422,0.4812992,0.43499845,0.54124147,0.545287,0.49726343,0.48971352,0.43157923,0.45572275,0.79073477,0.48236844,0.52300096,0.4591335,0.53416944,0.5372006,0.6336293,0.42305952],[0.8904007,0.73639715,0.7197194,0.8723023,0.5807015,0.7267966,0.7136683,0.7911389,0.71343327,0.4059431,1.0000001,0.5821378,0.35669103,0.89773756,0.5298439,0.4872383,0.46397263,0.77264893,0.75627863,0.8557228,0.66624004,0.8011569,0.5871535,0.8079395,0.7359757,0.74063706,0.81950796,0.46526566,0.39882994,0.55488884],[0.63588786,0.6085727,0.60657614,0.66556525,0.6869384,0.38011998,0.7781259,0.7214234,0.66837037,0.6410666,0.5821378,1.0000002,0.8804579,0.5834428,0.54865,0.7346271,0.47840172,0.64782804,0.57268906,0.6072114,0.7209437,0.5829785,0.7909332,0.70685947,0.5123829,0.58587325,0.656139,0.72283214,0.6334703,0.6747986],[0.4078098,0.5020032,0.4308542,0.44419926,0.60659647,0.40892997,0.57646585,0.42898715,0.4828288,0.6930722,0.35669103,0.8804579,1.0000001,0.36966115,0.500009,0.52309215,0.5295271,0.48679045,0.4228286,0.40611082,0.45487562,0.40183252,0.69079214,0.4299778,0.47594303,0.44456565,0.46650043,0.6444803,0.60458404,0.4700234],[0.8598217,0.72256273,0.6713133,0.81127656,0.56932414,0.64924896,0.71755576,0.784738,0.684993,0.40457422,0.89773756,0.5834428,0.36966115,1.0,0.5151938,0.46041113,0.43687394,0.7665096,0.721494,0.805923,0.620312,0.764395,0.6130829,0.7842323,0.71986383,0.69019425,0.7869235,0.47076845,0.35339063,0.57797474],[0.5710101,0.63578117,0.545449,0.49622858,0.5232171,0.4866442,0.54480124,0.58250153,0.56852615,0.4812992,0.5298439,0.54865,0.500009,0.5151938,1.0000001,0.49369228,0.5415368,0.46712065,0.545857,0.50672513,0.5026878,0.528473,0.5939343,0.56987756,0.5948211,0.6212574,0.5466881,0.5661656,0.5081326,0.5759716],[0.54391235,0.5594444,0.6250043,0.57094646,0.5320287,0.31258678,0.5723255,0.63079375,0.59195566,0.43499845,0.4872383,0.7346271,0.52309215,0.46041113,0.49369228,1.0000002,0.47160494,0.43561798,0.51060814,0.5000835,0.8648453,0.50449955,0.62147796,0.6425463,0.45530096,0.55516744,0.54195464,0.73033535,0.6598427,0.6600032],[0.6166586,0.70045835,0.50254625,0.45708483,0.47132927,0.73804903,0.41177434,0.3914824,0.5425516,0.54124147,0.46397263,0.47840172,0.5295271,0.43687394,0.5415368,0.47160494,0.9999999,0.43105245,0.53704137,0.4559096,0.51058304,0.5286638,0.52278674,0.44560254,0.69655854,0.5912267,0.48592407,0.55474496,0.7268746,0.39266318],[0.7363312,0.6341684,0.621631,0.7622712,0.5779548,0.6093021,0.69463015,0.683437,0.62424153,0.545287,0.77264893,0.64782804,0.48679045,0.7665096,0.46712065,0.43561798,0.43105245,0.99999976,0.63949656,0.743188,0.55873775,0.64531815,0.60276234,0.7136601,0.5986898,0.60903686,0.7638468,0.43177143,0.45668212,0.48935336],[0.79621077,0.70499796,0.624177,0.7568499,0.5845808,0.63876116,0.67794377,0.72056645,0.82992256,0.49726343,0.75627863,0.57268906,0.4228286,0.721494,0.545857,0.51060814,0.53704137,0.63949656,1.0000001,0.7483487,0.6218909,0.741346,0.5878761,0.733232,0.7304976,0.699735,0.7182682,0.55736375,0.4879311,0.52448404],[0.84804845,0.71142286,0.6778516,0.8386494,0.60368574,0.6351331,0.73229945,0.7770709,0.6852882,0.48971352,0.8557228,0.6072114,0.40611082,0.805923,0.50672513,0.5000835,0.4559096,0.743188,0.7483487,0.9999998,0.6557052,0.74698764,0.6100435,0.7918591,0.7341051,0.70958114,0.7937939,0.5361421,0.43547145,0.59483814],[0.7304311,0.6695237,0.7197397,0.72811997,0.6023481,0.43124622,0.68803775,0.76269674,0.689307,0.43157923,0.66624004,0.7209437,0.45487562,0.620312,0.5026878,0.8648453,0.51058304,0.55873775,0.6218909,0.6557052,0.99999976,0.6490581,0.6562749,0.81796604,0.5484835,0.64169073,0.69696105,0.6756448,0.7062857,0.6717284],[0.8513651,0.73810196,0.63217795,0.7835343,0.58454454,0.632846,0.6965342,0.7737982,0.71870327,0.45572275,0.8011569,0.5829785,0.40183252,0.764395,0.528473,0.50449955,0.5286638,0.64531815,0.741346,0.74698764,0.6490581,1.0000001,0.6034831,0.7750677,0.73833036,0.699069,0.75358605,0.5391378,0.45739502,0.5592393],[0.6325159,0.6759765,0.64289665,0.6742439,0.7366459,0.4973086,0.82939875,0.69788444,0.6481652,0.79073477,0.5871535,0.7909332,0.69079214,0.6130829,0.5939343,0.62147796,0.52278674,0.60276234,0.5878761,0.6100435,0.6562749,0.6034831,1.0000001,0.67263985,0.59838676,0.5887341,0.72523785,0.66749555,0.6003214,0.70778775],[0.86812633,0.69781864,0.7327473,0.8241866,0.61453676,0.50487006,0.8431965,0.8777317,0.7752774,0.48236844,0.8079395,0.70685947,0.4299778,0.7842323,0.56987756,0.6425463,0.44560254,0.7136601,0.733232,0.7918591,0.81796604,0.7750677,0.67263985,0.99999976,0.65181315,0.7001852,0.81522524,0.6340819,0.5825487,0.673704],[0.79679966,0.8077771,0.6440445,0.6820756,0.5621659,0.8078582,0.5820328,0.6485597,0.67101026,0.52300096,0.7359757,0.5123829,0.47594303,0.71986383,0.5948211,0.45530096,0.69655854,0.5986898,0.7304976,0.7341051,0.5484835,0.73833036,0.59838676,0.65181315,1.0,0.7379402,0.70701647,0.7237801,0.5175834,0.5195023],[0.79437876,0.7128211,0.65352964,0.7266351,0.55589724,0.60151094,0.64165604,0.7123651,0.67414623,0.4591335,0.74063706,0.58587325,0.44456565,0.69019425,0.6212574,0.55516744,0.5912267,0.60903686,0.699735,0.70958114,0.64169073,0.699069,0.5887341,0.7001852,0.7379402,1.0000001,0.7031269,0.5867226,0.47765973,0.59193623],[0.8284353,0.7416223,0.6755185,0.8123379,0.6388693,0.5993804,0.7759984,0.8040411,0.7435001,0.53416944,0.81950796,0.656139,0.46650043,0.7869235,0.5466881,0.54195464,0.48592407,0.7638468,0.7182682,0.7937939,0.69696105,0.75358605,0.72523785,0.81522524,0.70701647,0.7031269,0.9999995,0.589167,0.48480523,0.65034175],[0.5629362,0.63870436,0.5905334,0.5065558,0.57117033,0.3984728,0.58834517,0.649765,0.6687596,0.5372006,0.46526566,0.72283214,0.6444803,0.47076845,0.5661656,0.73033535,0.55474496,0.43177143,0.55736375,0.5361421,0.6756448,0.5391378,0.66749555,0.6340819,0.7237801,0.5867226,0.589167,1.0000005,0.6758599,0.6837481],[0.46700683,0.5702143,0.5958812,0.48607624,0.56759214,0.5744747,0.4957894,0.4526403,0.550822,0.6336293,0.39882994,0.6334703,0.60458404,0.35339063,0.5081326,0.6598427,0.7268746,0.45668212,0.4879311,0.43547145,0.7062857,0.45739502,0.6003214,0.5825487,0.5175834,0.47765973,0.48480523,0.6758599,1.0,0.4783258],[0.61749995,0.5722961,0.5950607,0.5739877,0.5547159,0.31589276,0.6504941,0.7674314,0.62930685,0.42305952,0.55488884,0.6747986,0.4700234,0.57797474,0.5759716,0.6600032,0.39266318,0.48935336,0.52448404,0.59483814,0.6717284,0.5592393,0.70778775,0.673704,0.5195023,0.59193623,0.65034175,0.6837481,0.4783258,0.99999994]],"type":"heatmap","xaxis":"x","yaxis":"y","hovertemplate":"x: %{x}\u003cbr\u003ey: %{y}\u003cbr\u003eSimilarity Score: %{z}\u003cextra\u003e\u003c\u002fextra\u003e"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"scaleanchor":"y","constrain":"domain"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"autorange":"reversed","constrain":"domain"},"coloraxis":{"colorbar":{"title":{"text":"Similarity Score"}},"colorscale":[[0.0,"rgb(247,252,240)"],[0.125,"rgb(224,243,219)"],[0.25,"rgb(204,235,197)"],[0.375,"rgb(168,221,181)"],[0.5,"rgb(123,204,196)"],[0.625,"rgb(78,179,211)"],[0.75,"rgb(43,140,190)"],[0.875,"rgb(8,104,172)"],[1.0,"rgb(8,64,129)"]]},"margin":{"t":60},"title":{"font":{"size":22,"color":"Black"},"text":"\u003cb\u003eSimilarity Matrix\u003c\u002fb\u003e","y":0.95,"x":0.55,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"width":800,"height":800,"showlegend":true,"legend":{"title":{"text":"Trend"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('0e3c140b-6abf-43a2-bf96-c6d1e553fad3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="32"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="D9m1GTXHsejK" data-outputId="79072e60-d908-483c-c256-2745e35ba8b6">
<div class="sourceCode" id="cb72"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Row numbers: &#39;</span><span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(probabilities))<span class="op">+</span><span class="st">&#39; and Topic probabilities in each Row: &#39;</span> <span class="op">+</span><span class="bu">str</span>(<span class="bu">len</span>(probabilities[<span class="dv">0</span>])))</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co"># To interpret the output: there are 21,739 rows (documents) and 152 topic probabilities per row, suggesting a topic model with 152 topics.</span></span></code></pre></div>
<div class="output stream stdout">
<pre><code>Row numbers: 21739 and Topic probabilities in each Row: 152
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="33"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:617}"
id="Td-3G-ba5RjH" data-outputId="e5852564-6076-4662-81b5-e1325799d800">
<div class="sourceCode" id="cb74"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#show Distribution of topic probabilities in row 2</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>model.visualize_distribution(probabilities[<span class="dv">3</span>],<span class="fl">0.0002</span>) <span class="co">#min_probability=0.0002</span></span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="7cd544dc-6548-4920-9e1b-f9912a36dd53" class="plotly-graph-div" style="height:600px; width:800px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("7cd544dc-6548-4920-9e1b-f9912a36dd53")) {                    Plotly.newPlot(                        "7cd544dc-6548-4920-9e1b-f9912a36dd53",                        [{"marker":{"color":"#C8D2D7","line":{"color":"#6E8484","width":1}},"orientation":"h","x":[0.001710672537464298,0.0014601346333941861,0.0014334398519281382,0.001358820637413297,0.0010329737167891811,0.0012867081188954856,0.0018289731988489902,0.005033995146529802,0.001977670603882302,0.001560135192524927,0.0012102282623951703,0.002432634327026596,0.0021701405879585895,0.0011603383838479178,0.0037771281570512585,0.0026116506638666093,0.0014396937215133646,0.0011345241201253427,0.0011867146159803379,0.0007795150251722173,0.0021671490164556404,0.0006968639013308954,0.00208956109150914,0.0025577977349988228,0.0015713506595850565,0.001425742081838363,0.00176109314611536,0.0026274019547383666,0.0017896977526259332,0.002657519132008213,0.0019410673406495737,0.0008186520285778911,0.0025323736637497467,0.000996389052858538,0.0022154191245743813,0.004131320143670734,0.0006036769603935936,0.0012756786655961582,0.002213970617395368,0.006852673380966929,0.0012496506005499526,0.0009466847675541231,0.002403185090370495,0.0015718244843461098,0.0008921439152530829,0.0032545812920220098,0.001881679977327055,0.0013063385709428915,0.014679486853272897,0.004951746548317561,0.001201644053784878,0.004547038275514093,0.0014223667498338124,0.0012391909878887255,0.00470696957874814,0.0025927559664211232,0.0011382915788904246,0.001356927817632056,0.001139605118229751,0.0017410772137767374,0.0007714902262475266,0.006811444603185892,0.0016528415124399455,0.002370589375469281,0.005233622090473432,0.0018980389903062067,0.0027524818135864744,0.0016784246040256,0.002714466852964779,0.0016666961340334725,0.0022749845773982996,0.005928022122379315,0.0016493418476006669,0.011314496408251534,0.002225357719273235,0.0006380984469711592,0.006375135689172151,0.002895066562157629,0.002032760970107693,0.001845163532746674,0.0070033398284277465,0.0011771128959174634,0.004915344519477511,0.0019544309761332615,0.0025689779977826526,0.0011506512168373152,0.0013310828650709573,0.0021550660321373732,0.011960966969182453,0.0030429772292670217,0.0015478678604796858,0.002114463708227098,0.002313070049061379,0.007210787935409159,0.0013931277249888483,0.0012597875291950715,0.006616959586632738,0.0013052754455281082,0.0016176155613924943,0.0029259784732543004,0.002197304253180398,0.008146556317002352,0.0018862286085021241,0.0019744582191629297,0.005551132223850799,0.0014219447220282866,0.002106629771842948,0.0020038065720443077,0.0020742038200969905,0.0019765527723744273,0.0099403161107956,0.002745087344203636,0.0012781698826641722,0.0019415620539383848,0.0036388225313358255,0.0012621323602146255,0.0017984922881181683,0.002048793367283358,0.0024791564432285204,0.0011313863733766571,0.0015189227827561642,0.002600030859217226,0.001286603960693594,0.0017157520241421593,0.001543003097946996,0.004904840677534421,0.0040759394760496,0.0023010581668928233,0.0026823644633366035,0.0015182354658001091,0.006842590897806377,0.0008521019486632781,0.008543593753950548,0.0025153854351584186,0.0042885843527360225,0.0021990376130189807,0.002214662318589911,0.003151885427512414,0.004678643087493517,0.0018900617260356222,0.0013316010112800157,0.003257332871698502,0.0017302763034394981,0.002282035339129587,0.0029870994311258043,0.010297413323074565,0.0053310840808333745,0.002680900313606794,0.0013158456211752856,0.004042887678343424,0.0013156968895629106,0.001484439220720582],"y":["\u003cb\u003eTopic 0\u003c\u002fb\u003e: best_favorite_love_starb...","\u003cb\u003eTopic 1\u003c\u002fb\u003e: baristas_barista_always_...","\u003cb\u003eTopic 2\u003c\u002fb\u003e: bathroom_dirty_please_ba...","\u003cb\u003eTopic 3\u003c\u002fb\u003e: parking_lot_is_park_star...","\u003cb\u003eTopic 4\u003c\u002fb\u003e: closed_open_hours_closin...","\u003cb\u003eTopic 5\u003c\u002fb\u003e: location_staff_friendly_...","\u003cb\u003eTopic 6\u003c\u002fb\u003e: slowest_ever_minutes_slo...","\u003cb\u003eTopic 7\u003c\u002fb\u003e: coffee_espresso_starbuck...","\u003cb\u003eTopic 8\u003c\u002fb\u003e: stars_star_give_because_...","\u003cb\u003eTopic 9\u003c\u002fb\u003e: slow_drive_thru_minutes_...","\u003cb\u003eTopic 10\u003c\u002fb\u003e: seating_tables_chairs_o...","\u003cb\u003eTopic 11\u003c\u002fb\u003e: mobile_app_order_orders...","\u003cb\u003eTopic 12\u003c\u002fb\u003e: mobile_order_app_ready_...","\u003cb\u003eTopic 13\u003c\u002fb\u003e: study_studying_students...","\u003cb\u003eTopic 14\u003c\u002fb\u003e: sandwich_bacon_breakfas...","\u003cb\u003eTopic 15\u003c\u002fb\u003e: she_her_me_was_said","\u003cb\u003eTopic 16\u003c\u002fb\u003e: great_service_customer_...","\u003cb\u003eTopic 17\u003c\u002fb\u003e: wifi_internet_free_work...","\u003cb\u003eTopic 18\u003c\u002fb\u003e: starbuck_louis_saint_fo...","\u003cb\u003eTopic 19\u003c\u002fb\u003e: tampa_south_starbucks_i...","\u003cb\u003eTopic 20\u003c\u002fb\u003e: rude_her_she_employee_e...","\u003cb\u003eTopic 21\u003c\u002fb\u003e: tucson_favorite_starbuc...","\u003cb\u003eTopic 22\u003c\u002fb\u003e: coffee_minutes_wait_lin...","\u003cb\u003eTopic 23\u003c\u002fb\u003e: worst_ever_starbucks_iv...","\u003cb\u003eTopic 24\u003c\u002fb\u003e: drinks_great_love_alway...","\u003cb\u003eTopic 25\u003c\u002fb\u003e: dog_pup_dogs_puppy_cup","\u003cb\u003eTopic 26\u003c\u002fb\u003e: airport_terminal_flight...","\u003cb\u003eTopic 27\u003c\u002fb\u003e: drink_drinks_wrong_they...","\u003cb\u003eTopic 28\u003c\u002fb\u003e: service_customer_rude_h...","\u003cb\u003eTopic 29\u003c\u002fb\u003e: decaf_caffeine_american...","\u003cb\u003eTopic 30\u003c\u002fb\u003e: long_line_lines_fast_st...","\u003cb\u003eTopic 31\u003c\u002fb\u003e: nashville_tennessee_in_...","\u003cb\u003eTopic 32\u003c\u002fb\u003e: card_gift_she_said_me","\u003cb\u003eTopic 33\u003c\u002fb\u003e: reno_starbucks_in_best_...","\u003cb\u003eTopic 34\u003c\u002fb\u003e: coffee_great_service_go...","\u003cb\u003eTopic 35\u003c\u002fb\u003e: pumpkin_spice_latte_lat...","\u003cb\u003eTopic 36\u003c\u002fb\u003e: indy_indianapolis_downt...","\u003cb\u003eTopic 37\u003c\u002fb\u003e: philly_philadelphia_in_...","\u003cb\u003eTopic 38\u003c\u002fb\u003e: review_reviews_starbuck...","\u003cb\u003eTopic 39\u003c\u002fb\u003e: grande_ounces_venti_cup...","\u003cb\u003eTopic 40\u003c\u002fb\u003e: parking_lot_busy_blah_i...","\u003cb\u003eTopic 41\u003c\u002fb\u003e: clover_machine_brewing_...","\u003cb\u003eTopic 42\u003c\u002fb\u003e: mobile_app_order_ready_...","\u003cb\u003eTopic 43\u003c\u002fb\u003e: staff_friendly_always_c...","\u003cb\u003eTopic 44\u003c\u002fb\u003e: flies_fly_bugs_display_...","\u003cb\u003eTopic 45\u003c\u002fb\u003e: scone_caramel_macchiato...","\u003cb\u003eTopic 46\u003c\u002fb\u003e: coffee_is_that_starbuck...","\u003cb\u003eTopic 47\u003c\u002fb\u003e: its_starbucks_is_has_yo...","\u003cb\u003eTopic 48\u003c\u002fb\u003e: tea_green_ice_earl_grey","\u003cb\u003eTopic 49\u003c\u002fb\u003e: foam_cup_no_full_inch","\u003cb\u003eTopic 50\u003c\u002fb\u003e: sbux_competition_tea_gr...","\u003cb\u003eTopic 51\u003c\u002fb\u003e: latte_minutes_lattes_wa...","\u003cb\u003eTopic 52\u003c\u002fb\u003e: chain_chains_review_mak...","\u003cb\u003eTopic 53\u003c\u002fb\u003e: music_loud_matthews_dav...","\u003cb\u003eTopic 54\u003c\u002fb\u003e: cappuccino_foam_dry_ext...","\u003cb\u003eTopic 55\u003c\u002fb\u003e: rewards_card_gold_rewar...","\u003cb\u003eTopic 56\u003c\u002fb\u003e: orleans_nola_new_conven...","\u003cb\u003eTopic 57\u003c\u002fb\u003e: drive_thru_location_bus...","\u003cb\u003eTopic 58\u003c\u002fb\u003e: casino_harrahs_silver_l...","\u003cb\u003eTopic 59\u003c\u002fb\u003e: order_store_wrong_locat...","\u003cb\u003eTopic 60\u003c\u002fb\u003e: santa_barbara_festival_...","\u003cb\u003eTopic 61\u003c\u002fb\u003e: ice_light_pink_drink_cu...","\u003cb\u003eTopic 62\u003c\u002fb\u003e: he_daniel_smile_sarah_d...","\u003cb\u003eTopic 63\u003c\u002fb\u003e: rude_be_starbucks_to_go","\u003cb\u003eTopic 64\u003c\u002fb\u003e: soy_milk_lactose_dairy_...","\u003cb\u003eTopic 65\u003c\u002fb\u003e: slow_drive_thru_slowest...","\u003cb\u003eTopic 66\u003c\u002fb\u003e: was_minutes_waiting_pas...","\u003cb\u003eTopic 67\u003c\u002fb\u003e: staff_peach_lemonade_dr...","\u003cb\u003eTopic 68\u003c\u002fb\u003e: employees_are_idea_coff...","\u003cb\u003eTopic 69\u003c\u002fb\u003e: mask_wearing_masks_wear...","\u003cb\u003eTopic 70\u003c\u002fb\u003e: rude_she_her_girl_attit...","\u003cb\u003eTopic 71\u003c\u002fb\u003e: bagel_cheese_egg_cream_...","\u003cb\u003eTopic 72\u003c\u002fb\u003e: starbucks_love_is_coffe...","\u003cb\u003eTopic 73\u003c\u002fb\u003e: strawberry_refresher_ac...","\u003cb\u003eTopic 74\u003c\u002fb\u003e: rude_baristas_barista_c...","\u003cb\u003eTopic 75\u003c\u002fb\u003e: boise_ho_idaho_in_is","\u003cb\u003eTopic 76\u003c\u002fb\u003e: mocha_chocolate_white_f...","\u003cb\u003eTopic 77\u003c\u002fb\u003e: hmshost_they_dutch_make...","\u003cb\u003eTopic 78\u003c\u002fb\u003e: wait_min_long_minutes_i...","\u003cb\u003eTopic 79\u003c\u002fb\u003e: reviews_write_review_pw...","\u003cb\u003eTopic 80\u003c\u002fb\u003e: frap_iced_vanilla_caram...","\u003cb\u003eTopic 81\u003c\u002fb\u003e: study_studying_place_st...","\u003cb\u003eTopic 82\u003c\u002fb\u003e: mocha_frap_chocolate_cr...","\u003cb\u003eTopic 83\u003c\u002fb\u003e: drive_chinden_thru_wait...","\u003cb\u003eTopic 84\u003c\u002fb\u003e: starbucks_of_line_be_th...","\u003cb\u003eTopic 85\u003c\u002fb\u003e: louis_st_place_of_plent...","\u003cb\u003eTopic 86\u003c\u002fb\u003e: seating_bright_timethe_...","\u003cb\u003eTopic 87\u003c\u002fb\u003e: covid_covid19_virus_dur...","\u003cb\u003eTopic 88\u003c\u002fb\u003e: dragonfruit_dragon_mang...","\u003cb\u003eTopic 89\u003c\u002fb\u003e: wait_americano_minutes_...","\u003cb\u003eTopic 90\u003c\u002fb\u003e: homeless_shelter_belong...","\u003cb\u003eTopic 91\u003c\u002fb\u003e: target_inside_coupon_ca...","\u003cb\u003eTopic 92\u003c\u002fb\u003e: he_rude_me_his_was","\u003cb\u003eTopic 93\u003c\u002fb\u003e: caramel_macchiato_taste...","\u003cb\u003eTopic 94\u003c\u002fb\u003e: through_busy_service_dr...","\u003cb\u003eTopic 95\u003c\u002fb\u003e: seating_table_theres_gr...","\u003cb\u003eTopic 96\u003c\u002fb\u003e: oatmeal_perfectenshlagu...","\u003cb\u003eTopic 97\u003c\u002fb\u003e: standard_wifi_pretty_ba...","\u003cb\u003eTopic 98\u003c\u002fb\u003e: morning_mornings_start_...","\u003cb\u003eTopic 99\u003c\u002fb\u003e: me_waited_my_said_he","\u003cb\u003eTopic 100\u003c\u002fb\u003e: thru_drive_car_coffee_...","\u003cb\u003eTopic 101\u003c\u002fb\u003e: caramel_frappe_crunch_...","\u003cb\u003eTopic 102\u003c\u002fb\u003e: staff_friendly_mildly_...","\u003cb\u003eTopic 103\u003c\u002fb\u003e: rating_stars_accessibi...","\u003cb\u003eTopic 104\u003c\u002fb\u003e: iced_he_cream_latte_cu...","\u003cb\u003eTopic 105\u003c\u002fb\u003e: staff_order_simple_who...","\u003cb\u003eTopic 106\u003c\u002fb\u003e: slow_time_reviews_minu...","\u003cb\u003eTopic 107\u003c\u002fb\u003e: newbie_baristas_slow_d...","\u003cb\u003eTopic 108\u003c\u002fb\u003e: name_spell_spelled_spe...","\u003cb\u003eTopic 109\u003c\u002fb\u003e: minutes_took_drinks_30...","\u003cb\u003eTopic 110\u003c\u002fb\u003e: lattes_latte_vanilla_c...","\u003cb\u003eTopic 111\u003c\u002fb\u003e: coffee_rude_holiday_em...","\u003cb\u003eTopic 112\u003c\u002fb\u003e: degrees_ac_air_cold_sw...","\u003cb\u003eTopic 113\u003c\u002fb\u003e: trash_recycling_recycl...","\u003cb\u003eTopic 114\u003c\u002fb\u003e: frappuccino_smores_ran...","\u003cb\u003eTopic 115\u003c\u002fb\u003e: tables_power_available...","\u003cb\u003eTopic 116\u003c\u002fb\u003e: through_drive_thru_ser...","\u003cb\u003eTopic 117\u003c\u002fb\u003e: drinks_shouldnt_closin...","\u003cb\u003eTopic 118\u003c\u002fb\u003e: roast_pike_pikes_dark_...","\u003cb\u003eTopic 119\u003c\u002fb\u003e: edmonton_power_windows...","\u003cb\u003eTopic 120\u003c\u002fb\u003e: staff_friendly_coffee_...","\u003cb\u003eTopic 121\u003c\u002fb\u003e: roast_dark_blonde_pike...","\u003cb\u003eTopic 122\u003c\u002fb\u003e: loud_noise_music_loude...","\u003cb\u003eTopic 123\u003c\u002fb\u003e: gladly_pleasure_misund...","\u003cb\u003eTopic 124\u003c\u002fb\u003e: batista_batistas_ya_in...","\u003cb\u003eTopic 125\u003c\u002fb\u003e: frappuccino_safeway_ch...","\u003cb\u003eTopic 126\u003c\u002fb\u003e: flat_white_steamed_she...","\u003cb\u003eTopic 127\u003c\u002fb\u003e: smyrna_coffee_im_littl...","\u003cb\u003eTopic 128\u003c\u002fb\u003e: worst_customer_service...","\u003cb\u003eTopic 129\u003c\u002fb\u003e: seattle_monon_starbuck...","\u003cb\u003eTopic 130\u003c\u002fb\u003e: whip_cream_whipped_fat...","\u003cb\u003eTopic 131\u003c\u002fb\u003e: smoking_smoke_smokers_...","\u003cb\u003eTopic 132\u003c\u002fb\u003e: cream_cold_sweet_foam_...","\u003cb\u003eTopic 133\u003c\u002fb\u003e: wrong_place_drinks_dri...","\u003cb\u003eTopic 134\u003c\u002fb\u003e: order_prater_sparks_or...","\u003cb\u003eTopic 135\u003c\u002fb\u003e: sara_he_trevor_sure_cu...","\u003cb\u003eTopic 136\u003c\u002fb\u003e: mobile_understaffed_sl...","\u003cb\u003eTopic 137\u003c\u002fb\u003e: downhill_coffee_taste_...","\u003cb\u003eTopic 138\u003c\u002fb\u003e: plastic_cup_straw_lid_...","\u003cb\u003eTopic 139\u003c\u002fb\u003e: baristas_awkward_can_s...","\u003cb\u003eTopic 140\u003c\u002fb\u003e: staffs_improvements_sl...","\u003cb\u003eTopic 141\u003c\u002fb\u003e: sale_minutes_between_a...","\u003cb\u003eTopic 142\u003c\u002fb\u003e: staff_timeseemingly_st...","\u003cb\u003eTopic 143\u003c\u002fb\u003e: inconveniently_unenjoy...","\u003cb\u003eTopic 144\u003c\u002fb\u003e: worst_ever_black_sugar...","\u003cb\u003eTopic 145\u003c\u002fb\u003e: tea_green_lattes_cravi...","\u003cb\u003eTopic 146\u003c\u002fb\u003e: smashed_wow_10_ur_wait...","\u003cb\u003eTopic 147\u003c\u002fb\u003e: worst_ever_experience_...","\u003cb\u003eTopic 148\u003c\u002fb\u003e: service_jerre_immacula...","\u003cb\u003eTopic 149\u003c\u002fb\u003e: brew_cold_wait_online_...","\u003cb\u003eTopic 150\u003c\u002fb\u003e: parking_thru_park_staf...","\u003cb\u003eTopic 151\u003c\u002fb\u003e: barristas_blond_barris..."],"type":"bar"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"font":{"size":22,"color":"Black"},"text":"\u003cb\u003eTopic Probability Distribution\u003c\u002fb\u003e","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"xaxis":{"title":{"text":"Probability"}},"width":800,"height":600},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('7cd544dc-6548-4920-9e1b-f9912a36dd53');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="34" id="nM2rWHblkob1">
<div class="sourceCode" id="cb75"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Transfer to time format</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#data[&#39;tweet_created_format&#39;]=data[&#39;tweet_created&#39;].apply(lambda x: pd.to_datetime(str(x), format=&#39;%Y-%m-%d&#39;))</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;date_format&#39;</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">&#39;date&#39;</span>], errors<span class="op">=</span><span class="st">&#39;coerce&#39;</span>)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Create topics over time</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>topics_over_time <span class="op">=</span> model.topics_over_time(data.text, timestamps<span class="op">=</span>data.date_format, nr_bins<span class="op">=</span><span class="dv">20</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="35"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:467}"
id="BMRUqFZ7nXo5" data-outputId="64c66bd6-021c-4d06-d62a-2cb50a0eae00">
<div class="sourceCode" id="cb76"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>model.visualize_topics_over_time(topics_over_time, topics <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>])</span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="2cb96155-8bf2-4548-933e-ba5f132e9630" class="plotly-graph-div" style="height:450px; width:1250px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("2cb96155-8bf2-4548-933e-ba5f132e9630")) {                    Plotly.newPlot(                        "2cb96155-8bf2-4548-933e-ba5f132e9630",                        [{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: emilie, favoritist, arts, outgoing, 3rd","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: citystatecountry, thoughtful, best, works, remember","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: quaint, favorite, forgotten, pillar, godzilla","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, love, friendly, starbucks, good","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, starbucks, love, always, is","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: favorite, starbucks, best, always, love","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, love, starbucks, favorite, always","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, love, starbucks, favorite, always","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, favorite, starbucks, always, love","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, favorite, starbucks, love, always","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, always, starbucks, love, favorite","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, always, favorite, starbucks, love","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, love, favorite, starbucks, always","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, favorite, always, starbucks, love","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: always, best, love, starbucks, amazing","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, love, starbucks, favorite, always"],"marker":{"color":"#E69F00"},"mode":"lines","name":"0_best_favorite_love_starbucks","x":["2006-11-18T11:05:26","2009-05-30T00:15:44","2010-04-02T20:39:10","2011-02-04T17:02:36","2011-12-09T13:26:02","2012-10-12T09:49:28","2013-08-16T06:12:54","2014-06-20T02:36:20","2015-04-23T22:59:46","2016-02-25T19:23:12","2016-12-29T15:46:38","2017-11-02T12:10:04","2018-09-06T08:33:30","2019-07-11T04:56:56","2020-05-14T01:20:22","2021-03-17T21:43:48"],"y":[1,1,8,13,26,26,53,51,64,47,63,58,74,58,34,34],"type":"scatter"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: differentvery, rummaging, wellyoure, waitedtheres, buffet","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, fritters, nicethis, 32n, starb","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, david, sometimes, are, favorites","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, famous, rich, remembering, guys","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, remember, great, are, barista","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, are, friendly, knowledgeable, always","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, always, are, location","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, friendly, always, are","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, friendly, always, are","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, always, are, awesome","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, are, ivan, always","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, always, are, friendly","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, always, are, friendly","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, great, quickly, location","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, kay, always, her"],"marker":{"color":"#56B4E9"},"mode":"lines","name":"1_baristas_barista_always_are","x":["2008-07-26T03:52:18","2010-04-02T20:39:10","2011-02-04T17:02:36","2011-12-09T13:26:02","2012-10-12T09:49:28","2013-08-16T06:12:54","2014-06-20T02:36:20","2015-04-23T22:59:46","2016-02-25T19:23:12","2016-12-29T15:46:38","2017-11-02T12:10:04","2018-09-06T08:33:30","2019-07-11T04:56:56","2020-05-14T01:20:22","2021-03-17T21:43:48"],"y":[1,5,10,9,18,26,26,37,37,36,35,33,35,19,21],"type":"scatter"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: heebie, jeebies, pix, peep, receives","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, toliet, sanitize, dirtiness, nastiest","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: dirty, footprints, laying, bathroom, wet","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, toilet, restroom, dirty, dirtiest","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: winning, dirty, medal, nasty, superheros","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, toilet, paper, filthy","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: filthy, floor, clean, dirty, spills","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, clean, toilet, dirty, bathrooms","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, bathrooms, clean, floor","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: dirty, bathroom, bathrooms, toilet, filthy","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: dirty, bathroom, toilet, bathrooms, floors","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, toilet, restroom, floor","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: please, bathroom, dirty, floor, clean","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, filthy, floor, floors","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: restroom, restrooms, bathroom, use, rag","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: filthy, dirty, bathroom, restroom, restrooms"],"marker":{"color":"#009E73"},"mode":"lines","name":"2_bathroom_dirty_please_bathrooms","x":["2007-09-22T07:28:52","2009-05-30T00:15:44","2010-04-02T20:39:10","2011-02-04T17:02:36","2011-12-09T13:26:02","2012-10-12T09:49:28","2013-08-16T06:12:54","2014-06-20T02:36:20","2015-04-23T22:59:46","2016-02-25T19:23:12","2016-12-29T15:46:38","2017-11-02T12:10:04","2018-09-06T08:33:30","2019-07-11T04:56:56","2020-05-14T01:20:22","2021-03-17T21:43:48"],"y":[1,2,4,8,4,14,8,23,30,51,34,39,55,40,15,10],"type":"scatter"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: easy, parkings, carrie, plymouth, pennsylvania","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, its, tables, power","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, park, is, drive","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, street, is, you","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, tables, can","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, park, of","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, drive, starbucks","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, park, is, you","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, park, is, you","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, park, lot, you, is","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, drive, thru","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, park, is, drive","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, spots, is, spot","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: 2025, parking, drivethru, yet, errandrunning","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, theres, park, valet"],"marker":{"color":"#F0E442"},"mode":"lines","name":"3_parking_lot_is_park","x":["2007-09-22T07:28:52","2010-04-02T20:39:10","2011-02-04T17:02:36","2011-12-09T13:26:02","2012-10-12T09:49:28","2013-08-16T06:12:54","2014-06-20T02:36:20","2015-04-23T22:59:46","2016-02-25T19:23:12","2016-12-29T15:46:38","2017-11-02T12:10:04","2018-09-06T08:33:30","2019-07-11T04:56:56","2020-05-14T01:20:22","2021-03-17T21:43:48"],"y":[2,11,16,11,21,37,37,35,21,22,25,22,22,4,8],"type":"scatter"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closing, daqueries, marriot, juliet, frappuccino","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: lie, aint, nonfiction, varied, bookstore","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: early, remain, open, close, prime","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, saturdays, decafe, firms, closed","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, closed, indy, hours, until11pmalthough","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, closed, hours, pm, close","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, closes, pm, doors, sign","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, hours, closed, closing, at","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, closed, hours, pm, 11pm","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, hours, open, 430am10pm, at","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, open, hours, posted, pm","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, open, hours, closing, pm","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, closed, hours, closing, at","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, open, hours, sign, pm","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, open, hours, closing, says"],"marker":{"color":"#D55E00"},"mode":"lines","name":"4_closed_open_hours_closing","x":["2009-05-30T00:15:44","2010-04-02T20:39:10","2011-02-04T17:02:36","2011-12-09T13:26:02","2012-10-12T09:49:28","2013-08-16T06:12:54","2014-06-20T02:36:20","2015-04-23T22:59:46","2016-02-25T19:23:12","2016-12-29T15:46:38","2017-11-02T12:10:04","2018-09-06T08:33:30","2019-07-11T04:56:56","2020-05-14T01:20:22","2021-03-17T21:43:48"],"y":[2,2,2,4,5,8,4,17,15,19,26,45,22,37,47],"type":"scatter"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: statement, fashion, somebody, disorganized, furniture","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: caution, excellent, vanderbilt, session, arm","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: rendezvous, pf, changs, migrate, starter","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: vanderbilt, leisurely, sipping, location, fireplace","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: crowdnice, atduring, boorish, i580, seminary","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: bout, great, friendly, staff, clean","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: nice, location, seating, friendly, staff","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: staff, location, good, friendly, place","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: nice, friendly, staff, good, location","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: staff, location, seating, friendly, nice","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: friendly, great, location, staff, outdoor","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: nice, staff, great, location, friendly","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: great, location, staff, nice, clean","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: friendly, location, seating, staff, nice","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: friendly, staff, location, seating, clean","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: adherence, bev, wtheir, servuce, remover","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: nice, staff, puppychinos, location, baskets"],"marker":{"color":"#0072B2"},"mode":"lines","name":"5_location_staff_friendly_nice","x":["2007-09-22T07:28:52","2008-07-26T03:52:18","2009-05-30T00:15:44","2010-04-02T20:39:10","2011-02-04T17:02:36","2011-12-09T13:26:02","2012-10-12T09:49:28","2013-08-16T06:12:54","2014-06-20T02:36:20","2015-04-23T22:59:46","2016-02-25T19:23:12","2016-12-29T15:46:38","2017-11-02T12:10:04","2018-09-06T08:33:30","2019-07-11T04:56:56","2020-05-14T01:20:22","2021-03-17T21:43:48"],"y":[1,1,1,5,5,15,20,17,19,31,18,22,26,25,19,7,9],"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"xaxis":{"showgrid":true},"yaxis":{"showgrid":true,"title":{"text":"Frequency"}},"title":{"font":{"size":22,"color":"Black"},"text":"\u003cb\u003eTopics over Time\u003c\u002fb\u003e","y":0.95,"x":0.4,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"width":1250,"height":450,"legend":{"title":{"text":"\u003cb\u003eGlobal Topic Representation"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2cb96155-8bf2-4548-933e-ba5f132e9630');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="36"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:917}"
id="64ei4wzR4rP7" data-outputId="62f8c988-8781-4527-d197-138dc9a1b256">
<div class="sourceCode" id="cb77"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Our focus is on topics 1 through 5 (we exclude topic 0 for our purposes)</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>docs<span class="op">=</span>data[<span class="st">&#39;text&#39;</span>]</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>classes<span class="op">=</span>data[<span class="st">&#39;stars_x&#39;</span>]</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Create topics per class</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>topics_per_class <span class="op">=</span> model.topics_per_class(docs, classes<span class="op">=</span>classes)</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>model.visualize_topics_per_class(topics_per_class)</span></code></pre></div>
<div class="output display_data">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="a18d5fb7-f396-423d-aef6-09615c794866" class="plotly-graph-div" style="height:900px; width:1250px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a18d5fb7-f396-423d-aef6-09615c794866")) {                    Plotly.newPlot(                        "a18d5fb7-f396-423d-aef6-09615c794866",                        [{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: lynn, heathers, looping, zaxsby, nebraska","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: love, starbucks, favorite, is, best","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: starbucks, favorite, best, love, always","\u003cb\u003eTopic 0\u003c\u002fb\u003e\u003cbr\u003eWords: best, love, favorite, always, starbucks"],"marker":{"color":"#E69F00"},"name":"0_best_favorite_love_starbucks","orientation":"h","visible":true,"x":[4,19,104,484],"y":[1,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, her, location, find","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, beware, drinksthen, breaktheir","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, are, famous, friendly","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, are, barista, always, friendly","\u003cb\u003eTopic 1\u003c\u002fb\u003e\u003cbr\u003eWords: baristas, barista, always, are, friendly"],"marker":{"color":"#56B4E9"},"name":"1_baristas_barista_always_are","orientation":"h","visible":"legendonly","x":[12,10,20,76,230],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, filthy, toilet, floor","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, toilet, bathrooms, floor","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathroom, dirty, floor, bathrooms, paper","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: please, bathroom, dirty, bathrooms, clean","\u003cb\u003eTopic 2\u003c\u002fb\u003e\u003cbr\u003eWords: bathrooms, clean, bathroom, toilet, restroom"],"marker":{"color":"#009E73"},"name":"2_bathroom_dirty_please_bathrooms","orientation":"h","visible":"legendonly","x":[131,92,60,34,21],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, spots, handicapped, park, handicap","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, park, is, you","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, park, starbucks","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, park, starbucks","\u003cb\u003eTopic 3\u003c\u002fb\u003e\u003cbr\u003eWords: parking, lot, is, park, starbucks"],"marker":{"color":"#F0E442"},"name":"3_parking_lot_is_park","orientation":"h","visible":"legendonly","x":[24,32,83,108,47],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: closed, open, hours, closing, at","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: hours, open, closed, sign, pm","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, closed, hours, pm, sign","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, 430am10pm, closed, hours, closing","\u003cb\u003eTopic 4\u003c\u002fb\u003e\u003cbr\u003eWords: open, closed, 9pm, closing, posted"],"marker":{"color":"#D55E00"},"name":"4_closed_open_hours_closing","orientation":"h","visible":"legendonly","x":[177,27,24,16,11],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: unpleasant, scoots, staff, redecorate, sharps","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: location, seating, nice, staff, friendly","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: staff, friendly, nice, seating, location","\u003cb\u003eTopic 5\u003c\u002fb\u003e\u003cbr\u003eWords: location, friendly, staff, great, nice"],"marker":{"color":"#0072B2"},"name":"5_location_staff_friendly_nice","orientation":"h","visible":"legendonly","x":[6,32,93,110],"y":[2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 6\u003c\u002fb\u003e\u003cbr\u003eWords: slowest, ever, minutes, slow, been","\u003cb\u003eTopic 6\u003c\u002fb\u003e\u003cbr\u003eWords: slowest, ever, slow, minutes, been","\u003cb\u003eTopic 6\u003c\u002fb\u003e\u003cbr\u003eWords: slowest, ever, slow, ive, minutes","\u003cb\u003eTopic 6\u003c\u002fb\u003e\u003cbr\u003eWords: slowest, fastest, sugarcream, slowroasted, youve","\u003cb\u003eTopic 6\u003c\u002fb\u003e\u003cbr\u003eWords: fast, slowest, mislead, speedier, cassidy"],"marker":{"color":"#CC79A7"},"name":"6_slowest_ever_minutes_slow","orientation":"h","visible":"legendonly","x":[136,76,19,3,6],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 7\u003c\u002fb\u003e\u003cbr\u003eWords: coffee, espresso, prices, starbucks, like","\u003cb\u003eTopic 7\u003c\u002fb\u003e\u003cbr\u003eWords: coffee, espresso, prices, starbucks, that","\u003cb\u003eTopic 7\u003c\u002fb\u003e\u003cbr\u003eWords: espresso, coffee, taste, same, starbucks","\u003cb\u003eTopic 7\u003c\u002fb\u003e\u003cbr\u003eWords: coffee, espresso, same, starbucks, iced","\u003cb\u003eTopic 7\u003c\u002fb\u003e\u003cbr\u003eWords: coffee, im, starbucks, espresso, love"],"marker":{"color":"#E69F00"},"name":"7_coffee_espresso_starbucks_same","orientation":"h","visible":"legendonly","x":[65,61,48,32,27],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 8\u003c\u002fb\u003e\u003cbr\u003eWords: star, stars, give, would, zero","\u003cb\u003eTopic 8\u003c\u002fb\u003e\u003cbr\u003eWords: star, stars, because, give, only","\u003cb\u003eTopic 8\u003c\u002fb\u003e\u003cbr\u003eWords: stars, star, give, because, they","\u003cb\u003eTopic 8\u003c\u002fb\u003e\u003cbr\u003eWords: stars, star, reason, because, only","\u003cb\u003eTopic 8\u003c\u002fb\u003e\u003cbr\u003eWords: stars, star, give, they, earns"],"marker":{"color":"#56B4E9"},"name":"8_stars_star_give_because","orientation":"h","visible":"legendonly","x":[70,27,36,35,39],"y":[1,2,3,4,5],"type":"bar"},{"hoverinfo":"text","hovertext":["\u003cb\u003eTopic 9\u003c\u002fb\u003e\u003cbr\u003eWords: slow, drive, thru, minutes, wait","\u003cb\u003eTopic 9\u003c\u002fb\u003e\u003cbr\u003eWords: slow, drive, minutes, thru, slowest","\u003cb\u003eTopic 9\u003c\u002fb\u003e\u003cbr\u003eWords: slow, drive, thru, minutes, through","\u003cb\u003eTopic 9\u003c\u002fb\u003e\u003cbr\u003eWords: slow, drive, drivethru, through, line","\u003cb\u003eTopic 9\u003c\u002fb\u003e\u003cbr\u003eWords: drive, through, fast, slow, thru"],"marker":{"color":"#009E73"},"name":"9_slow_drive_thru_minutes","orientation":"h","visible":"legendonly","x":[91,45,29,8,21],"y":[1,2,3,4,5],"type":"bar"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"xaxis":{"showgrid":true,"title":{"text":"Frequency"}},"yaxis":{"showgrid":true,"title":{"text":"Class"}},"title":{"font":{"size":22,"color":"Black"},"text":"\u003cb\u003eTopics per Class\u003c\u002fb\u003e","y":0.95,"x":0.4,"xanchor":"center","yanchor":"top"},"hoverlabel":{"font":{"size":16,"family":"Rockwell"},"bgcolor":"white"},"width":1250,"height":900,"legend":{"title":{"text":"\u003cb\u003eGlobal Topic Representation"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a18d5fb7-f396-423d-aef6-09615c794866');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html>
</div>
</div>
<div class="cell code" data-execution_count="37" id="lIcmJAgUEwxU">
<div class="sourceCode" id="cb78"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select most 3 similar topics</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>similar_topics, similarity <span class="op">=</span> model.find_topics(<span class="st">&quot;dirty&quot;</span>, top_n <span class="op">=</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="38"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="W5HF_hBTEuEj" data-outputId="c529f350-9e6a-471c-8333-0a38e85699a5">
<div class="sourceCode" id="cb79"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>similar_topics</span></code></pre></div>
<div class="output execute_result" data-execution_count="38">
<pre><code>[2, 62, 44]</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="39"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="iz0zkskWEhTw" data-outputId="7774ad9d-e305-4ab4-bf79-aecfe49737cc">
<div class="sourceCode" id="cb81"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>most_similar <span class="op">=</span> similar_topics[<span class="dv">0</span>]</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;The Most Similar Topic Info: </span><span class="ch">\n</span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(model.get_topic(most_similar)))</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Similarity Score: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(similarity[<span class="dv">0</span>]))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>The Most Similar Topic Info: 
[(&#39;bathroom&#39;, 0.02273032784069968), (&#39;dirty&#39;, 0.019162040205431486), (&#39;please&#39;, 0.015154121939460372), (&#39;bathrooms&#39;, 0.012365799891371921), (&#39;toilet&#39;, 0.012037273153635215), (&#39;floor&#39;, 0.011569748011723231), (&#39;filthy&#39;, 0.011126508700233805), (&#39;restroom&#39;, 0.010908500223459084), (&#39;clean&#39;, 0.010836943506913136), (&#39;floors&#39;, 0.009417887288617513)]
Similarity Score: 0.30688443779945374
</code></pre>
</div>
</div>
<section id="additional-analysis" class="cell markdown"
id="kpu5dXP_TBPC">
<h1>Additional Analysis</h1>
</section>
<div class="cell code" data-execution_count="40" id="nHJnJDqn-0xe">
<div class="sourceCode" id="cb83"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> LatentDirichletAllocation</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> textblob <span class="im">import</span> TextBlob</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score, classification_report</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="41" id="OOeWswx2UTV2">
<div class="sourceCode" id="cb84"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use if reading in file from Google Drive</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>starbucks_file_path <span class="op">=</span> <span class="st">&#39;/content/drive/MyDrive/Yelp Reviews/starbucks_data.csv&#39;</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(starbucks_file_path)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="42"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="AfQDnlAtEdoG" data-outputId="cc99e9e7-830d-4f66-8411-b85302c9cb1c">
<div class="sourceCode" id="cb85"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the Starbucks data</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co">#starbucks_file_path = &#39;/content/drive/MyDrive/Yelp Reviews/starbucks_data.csv&#39;</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Use this code if working with local file</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co">#starbucks_file_path = &#39;starbucks_data.csv&#39;</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="co">#df2 = pd.read_csv(starbucks_file_path)</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the column names to check for typos or incorrect names</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2.columns)</span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Preprocessing</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure &#39;review_text&#39; matches the actual column name in your DataFrame</span></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a><span class="co"># If the column name is different, update it accordingly. For example, if the column is named &#39;Review Text&#39;, use:</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a><span class="co"># df = df.dropna(subset=[&#39;Review Text&#39;])</span></span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df2.dropna(subset<span class="op">=</span>[<span class="st">&#39;text&#39;</span>])  <span class="co"># Drop missing reviews</span></span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">&#39;text&#39;</span>] <span class="op">=</span> df2[<span class="st">&#39;text&#39;</span>].astype(<span class="bu">str</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Index([&#39;review_id&#39;, &#39;user_id&#39;, &#39;business_id&#39;, &#39;stars_x&#39;, &#39;useful&#39;, &#39;funny&#39;,
       &#39;cool&#39;, &#39;text&#39;, &#39;date&#39;, &#39;name&#39;, &#39;address&#39;, &#39;city&#39;, &#39;state&#39;,
       &#39;postal_code&#39;, &#39;latitude&#39;, &#39;longitude&#39;, &#39;stars_y&#39;, &#39;review_count&#39;,
       &#39;is_open&#39;, &#39;attributes&#39;, &#39;categories&#39;, &#39;hours&#39;],
      dtype=&#39;object&#39;)
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="43"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:487}"
id="t-zJZjBgIYPj" data-outputId="7447d905-a28e-43fb-b98d-4771bec45fa0">
<div class="sourceCode" id="cb87"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sentiment Analysis</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_sentiment(text):</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> TextBlob(text).sentiment.polarity</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">&#39;sentiment&#39;</span>] <span class="op">=</span> df2[<span class="st">&#39;text&#39;</span>].<span class="bu">apply</span>(get_sentiment)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sentiment distribution for AZ and LA</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>az_reviews <span class="op">=</span> df2[df2[<span class="st">&#39;state&#39;</span>] <span class="op">==</span> <span class="st">&#39;AZ&#39;</span>][<span class="st">&#39;sentiment&#39;</span>]</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>la_reviews <span class="op">=</span> df2[df2[<span class="st">&#39;state&#39;</span>] <span class="op">==</span> <span class="st">&#39;LA&#39;</span>][<span class="st">&#39;sentiment&#39;</span>]</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>sns.histplot(az_reviews, bins<span class="op">=</span><span class="dv">20</span>, kde<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>, label<span class="op">=</span><span class="st">&#39;Arizona&#39;</span>)</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>sns.histplot(la_reviews, bins<span class="op">=</span><span class="dv">20</span>, kde<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">&#39;red&#39;</span>, label<span class="op">=</span><span class="st">&#39;Louisiana&#39;</span>)</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Sentiment Distribution in AZ vs LA&#39;</span>)</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/e8717eff2424ca1d4ab0999e9fe900997d51b2b6.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="44"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="yt5z7aEVJDZR" data-outputId="b26848b2-26e8-4468-afd9-16ac35fafe55">
<div class="sourceCode" id="cb88"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Topic Modeling using LDA</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>, max_features<span class="op">=</span><span class="dv">500</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> vectorizer.fit_transform(df2[<span class="st">&#39;text&#39;</span>])</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>lda <span class="op">=</span> LatentDirichletAllocation(n_components<span class="op">=</span><span class="dv">3</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>lda.fit(X)</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display top words in each topic</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>topics <span class="op">=</span> {i: [words[idx] <span class="cf">for</span> idx <span class="kw">in</span> topic.argsort()[:<span class="op">-</span><span class="dv">6</span>:<span class="op">-</span><span class="dv">1</span>]] <span class="cf">for</span> i, topic <span class="kw">in</span> <span class="bu">enumerate</span>(lda.components_)}</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Top words in each topic:&quot;</span>, topics)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Top words in each topic: {0: [&#39;starbucks&#39;, &#39;friendly&#39;, &#39;great&#39;, &#39;location&#39;, &#39;staff&#39;], 1: [&#39;drink&#39;, &#39;coffee&#39;, &#39;ordered&#39;, &#39;starbucks&#39;, &#39;order&#39;], 2: [&#39;order&#39;, &#39;minutes&#39;, &#39;line&#39;, &#39;starbucks&#39;, &#39;drive&#39;]}
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="45"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:871}"
id="R_hsbRI5LAqL" data-outputId="0ae478a7-b7ca-479a-b133-657433bafc63">
<div class="sourceCode" id="cb90"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Word Cloud for High-Rated vs Low-Rated Reviews</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_wordcloud(subset, title):</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> <span class="st">&#39; &#39;</span>.join(subset)</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    wordcloud <span class="op">=</span> WordCloud(width<span class="op">=</span><span class="dv">800</span>, height<span class="op">=</span><span class="dv">400</span>, background_color<span class="op">=</span><span class="st">&#39;white&#39;</span>).generate(text)</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    plt.imshow(wordcloud, interpolation<span class="op">=</span><span class="st">&#39;bilinear&#39;</span>)</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    plt.axis(<span class="st">&#39;off&#39;</span>)</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    plt.title(title)</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>high_rated <span class="op">=</span> df2[df2[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&gt;=</span> <span class="dv">4</span>][<span class="st">&#39;text&#39;</span>]</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>low_rated <span class="op">=</span> df2[df2[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&lt;=</span> <span class="dv">2</span>][<span class="st">&#39;text&#39;</span>]</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>plot_wordcloud(high_rated, <span class="st">&#39;High-Rated Reviews&#39;</span>)</span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>plot_wordcloud(low_rated, <span class="st">&#39;Low-Rated Reviews&#39;</span>)</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/0ac17f9603479ef26f732f618f545b105ad07310.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/2337fcd675da002b50e42832c3fb2a07f352fe2d.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="46"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="fYPU6fyOMefc" data-outputId="b8fb3438-08f5-4cb0-9448-bc415ac6d641">
<div class="sourceCode" id="cb91"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geographic &amp; Keyword Analysis - High-Frequency Words in High-Rated and Low-Rated Reviews</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>high_rated_texts <span class="op">=</span> high_rated.<span class="bu">str</span>.cat(sep<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>low_rated_texts <span class="op">=</span> low_rated.<span class="bu">str</span>.cat(sep<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>, max_features<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>high_tf_idf <span class="op">=</span> vectorizer.fit_transform([high_rated_texts])</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>low_tf_idf <span class="op">=</span> vectorizer.fit_transform([low_rated_texts])</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>high_keywords <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>low_keywords <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;High-Frequency Words in High-Rated Reviews:&quot;</span>, high_keywords)</span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;High-Frequency Words in Low-Rated Reviews:&quot;</span>, low_keywords)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>High-Frequency Words in High-Rated Reviews: [&#39;asked&#39; &#39;coffee&#39; &#39;customer&#39; &#39;don&#39; &#39;drink&#39; &#39;drinks&#39; &#39;drive&#39; &#39;just&#39; &#39;like&#39;
 &#39;line&#39; &#39;location&#39; &#39;make&#39; &#39;minutes&#39; &#39;order&#39; &#39;ordered&#39; &#39;people&#39; &#39;service&#39;
 &#39;starbucks&#39; &#39;time&#39; &#39;ve&#39;]
High-Frequency Words in Low-Rated Reviews: [&#39;asked&#39; &#39;coffee&#39; &#39;customer&#39; &#39;don&#39; &#39;drink&#39; &#39;drinks&#39; &#39;drive&#39; &#39;just&#39; &#39;like&#39;
 &#39;line&#39; &#39;location&#39; &#39;make&#39; &#39;minutes&#39; &#39;order&#39; &#39;ordered&#39; &#39;people&#39; &#39;service&#39;
 &#39;starbucks&#39; &#39;time&#39; &#39;ve&#39;]
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="47"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:452}"
id="rUBzWHGRMqY6" data-outputId="2a9ec1a1-5bdb-41b6-9687-46b1dfd88bff">
<div class="sourceCode" id="cb93"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation Analysis</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> [<span class="st">&#39;stars_x&#39;</span>, <span class="st">&#39;sentiment&#39;</span>]</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="op">=</span> df2[numeric_cols].corr()</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>sns.heatmap(correlation_matrix, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">&#39;coolwarm&#39;</span>)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Correlation Analysis&#39;</span>)</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/9a15f299dfdfd55f0d0562921b8f5357c057d398.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="48"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:487}"
id="xOdHT_P6MzGq" data-outputId="8ed22671-db29-4240-a761-2ac24151ed38">
<div class="sourceCode" id="cb94"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyzing Review Length and Format Effect on Good Reviews</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">&#39;review_length&#39;</span>] <span class="op">=</span> df2[<span class="st">&#39;text&#39;</span>].<span class="bu">apply</span>(<span class="bu">len</span>)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>sns.boxplot(x<span class="op">=</span>df[<span class="st">&#39;stars_x&#39;</span>], y<span class="op">=</span>df2[<span class="st">&#39;review_length&#39;</span>])</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Review Length vs. stars_x&#39;</span>)</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;stars_x&#39;</span>)</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Review Length&#39;</span>)</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/6da011d3926e602aaaaed187f4b5bd8cd31b3892.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="49"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="R-9PcmjMNBQS" data-outputId="8a285ca9-cd50-4794-a22a-329548489b52">
<div class="sourceCode" id="cb95"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictive Modeling - Sentiment Classification</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">&#39;sentiment_label&#39;</span>] <span class="op">=</span> df2[<span class="st">&#39;sentiment&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="dv">1</span> <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="dv">0</span>)  <span class="co"># Positive (1) vs Negative (0)</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, df2[<span class="st">&#39;sentiment_label&#39;</span>], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">100</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Accuracy:&quot;</span>, accuracy_score(y_test, y_pred))</span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Classification Report:</span><span class="ch">\n</span><span class="st">&quot;</span>, classification_report(y_test, y_pred))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Accuracy: 0.859245630174793
Classification Report:
               precision    recall  f1-score   support

           0       0.79      0.69      0.74      1241
           1       0.88      0.93      0.90      3107

    accuracy                           0.86      4348
   macro avg       0.84      0.81      0.82      4348
weighted avg       0.86      0.86      0.86      4348

</code></pre>
</div>
</div>
<div class="cell markdown" id="hcvuzkjAVq1a">
<p>##TF-IDF vectorization on the whole dataset</p>
</div>
<div class="cell code" data-execution_count="50"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="bP1_ZX1OMV2I" data-outputId="51e12d6a-844f-4425-808f-823608fcda12">
<div class="sourceCode" id="cb97"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> RegexpTokenizer</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Load your dataset (assuming the text column is called &#39;text&#39;)</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df2</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Extract the text data</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>text_data <span class="op">=</span> df3[<span class="st">&#39;text&#39;</span>]  <span class="co"># Replace &#39;text&#39; with your actual column name if it&#39;s different</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>token <span class="op">=</span> RegexpTokenizer(<span class="vs">r&#39;[a-zA-Z]+&#39;</span>)</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Initialize the TfidfVectorizer</span></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>,ngram_range <span class="op">=</span> (<span class="dv">1</span>,<span class="dv">1</span>),tokenizer <span class="op">=</span> token.tokenize, max_features <span class="op">=</span> <span class="dv">1000</span>)</span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Fit and transform the text data</span></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>tfidf_matrix <span class="op">=</span> vectorizer.fit_transform(text_data)</span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Convert the result into a DataFrame for easy interpretation</span></span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>tfidf_df <span class="op">=</span> pd.DataFrame(tfidf_matrix.toarray(), columns<span class="op">=</span>vectorizer.get_feature_names_out())</span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Display or save the result (optional)</span></span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tfidf_df.head())</span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Optionally, save the TF-IDF result to a CSV file</span></span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a><span class="co">#tfidf_df.to_csv(&#39;tfidf_output.csv&#39;, index=False)</span></span></code></pre></div>
<div class="output stream stdout">
<pre><code>   able  absolute  absolutely  access  accommodating  accurate  act  actually  \
0   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
1   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
2   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
3   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   
4   0.0       0.0         0.0     0.0            0.0       0.0  0.0       0.0   

   add  added  ...  wrong  yeah  year  years  yelp  yes  yesterday  young  \
0  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
1  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
2  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
3  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   
4  0.0    0.0  ...    0.0   0.0   0.0    0.0   0.0  0.0        0.0    0.0   

   yummy  zero  
0    0.0   0.0  
1    0.0   0.0  
2    0.0   0.0  
3    0.0   0.0  
4    0.0   0.0  

[5 rows x 1000 columns]
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="51" id="TEDdnv3pN3GQ">
<div class="sourceCode" id="cb99"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>df3[<span class="st">&#39;text&#39;</span>].fillna(<span class="st">&#39;&#39;</span>, inplace<span class="op">=</span><span class="va">True</span>)  <span class="co"># Replace NaN values in &#39;text&#39; column with an empty string</span></span></code></pre></div>
</div>
<div class="cell code" data-execution_count="52" id="4v3lLKL1VL1i">
<div class="sourceCode" id="cb100"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Import the RegexpTokenizer (if not already imported)</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> RegexpTokenizer</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="co"># This import is used to create a tokenizer that extracts only alphabetic tokens.</span></span></code></pre></div>
</div>
<div class="cell code" data-execution_count="53"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="oRRgq2m2ODd5" data-outputId="d4d50cca-e2c0-454b-874f-369411912fcb">
<div class="sourceCode" id="cb101"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Enhance TF-IDF Vectorizer Settings and Display Top Terms</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> RegexpTokenizer</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the tokenizer to extract alphabetic tokens</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>token <span class="op">=</span> RegexpTokenizer(<span class="vs">r&#39;[a-zA-Z]+&#39;</span>)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-initialize the TfidfVectorizer with advanced parameters:</span></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="co"># - Remove English stop words</span></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a><span class="co"># - Include unigrams and bigrams (1,2)</span></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="co"># - Use the custom tokenizer</span></span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="co"># - Limit to top 1000 features</span></span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a><span class="co"># - Ignore terms in more than 80% of documents (max_df)</span></span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a><span class="co"># - Ignore terms in fewer than 5 documents (min_df)</span></span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a><span class="co"># - Apply sublinear term frequency scaling and L2 normalization</span></span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(</span>
<span id="cb101-18"><a href="#cb101-18" aria-hidden="true" tabindex="-1"></a>    stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>,</span>
<span id="cb101-19"><a href="#cb101-19" aria-hidden="true" tabindex="-1"></a>    ngram_range<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb101-20"><a href="#cb101-20" aria-hidden="true" tabindex="-1"></a>    tokenizer<span class="op">=</span>token.tokenize,</span>
<span id="cb101-21"><a href="#cb101-21" aria-hidden="true" tabindex="-1"></a>    max_features<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb101-22"><a href="#cb101-22" aria-hidden="true" tabindex="-1"></a>    max_df<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb101-23"><a href="#cb101-23" aria-hidden="true" tabindex="-1"></a>    min_df<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb101-24"><a href="#cb101-24" aria-hidden="true" tabindex="-1"></a>    sublinear_tf<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb101-25"><a href="#cb101-25" aria-hidden="true" tabindex="-1"></a>    norm<span class="op">=</span><span class="st">&#39;l2&#39;</span></span>
<span id="cb101-26"><a href="#cb101-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb101-27"><a href="#cb101-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-28"><a href="#cb101-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit and transform the text data using the updated vectorizer</span></span>
<span id="cb101-29"><a href="#cb101-29" aria-hidden="true" tabindex="-1"></a>tfidf_matrix <span class="op">=</span> vectorizer.fit_transform(df[<span class="st">&#39;text&#39;</span>])</span>
<span id="cb101-30"><a href="#cb101-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-31"><a href="#cb101-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve the feature names (i.e., the terms)</span></span>
<span id="cb101-32"><a href="#cb101-32" aria-hidden="true" tabindex="-1"></a>feature_names <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb101-33"><a href="#cb101-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-34"><a href="#cb101-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the total TF-IDF score for each feature across all documents and sort them in descending order</span></span>
<span id="cb101-35"><a href="#cb101-35" aria-hidden="true" tabindex="-1"></a>sorted_items <span class="op">=</span> <span class="bu">sorted</span>(<span class="bu">zip</span>(tfidf_matrix.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>).A1, feature_names), reverse<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb101-36"><a href="#cb101-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-37"><a href="#cb101-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the top 20 terms with the highest TF-IDF scores</span></span>
<span id="cb101-38"><a href="#cb101-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sorted_items[:<span class="dv">20</span>])</span></code></pre></div>
<div class="output stream stdout">
<pre><code>[(1205.714378929922, &#39;starbucks&#39;), (868.030445055966, &#39;s&#39;), (847.8254504891229, &#39;coffee&#39;), (841.2030559732993, &#39;t&#39;), (803.2112850789077, &#39;location&#39;), (731.3658355945123, &#39;service&#39;), (667.1719384805034, &#39;order&#39;), (655.8240926438557, &#39;drink&#39;), (655.5666861055854, &#39;staff&#39;), (648.7520114493221, &#39;drive&#39;), (638.3019848911283, &#39;friendly&#39;), (629.1234729340187, &#39;time&#39;), (584.2714819189421, &#39;great&#39;), (582.5406434414648, &#39;just&#39;), (570.8793156503315, &#39;like&#39;), (527.3230980384586, &#39;good&#39;), (511.80811371406236, &#39;place&#39;), (507.66029707451384, &#39;drinks&#39;), (493.0386808390278, &#39;ve&#39;), (476.4055529770933, &#39;nice&#39;)]
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="54"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:564}"
id="mlUqFf3ROMIU" data-outputId="e76236d0-eca7-4694-bea9-02f6c659d529">
<div class="sourceCode" id="cb103"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Visualize Top 20 TF-IDF Terms with a Bar Plot</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the top 20 terms from the sorted list</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>top_words <span class="op">=</span> sorted_items[:<span class="dv">20</span>]</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Unzip the list of tuples into separate sequences for words and their scores</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>words, scores <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>top_words)</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a figure with specified dimensions</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">6</span>))</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot a horizontal bar chart with Seaborn: x-axis as TF-IDF scores and y-axis as words</span></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>scores, y<span class="op">=</span>words)</span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the axes and add a title to the plot</span></span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;TF-IDF Score&quot;</span>)</span>
<span id="cb103-19"><a href="#cb103-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Words&quot;</span>)</span>
<span id="cb103-20"><a href="#cb103-20" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Top 20 TF-IDF Words&quot;</span>)</span>
<span id="cb103-21"><a href="#cb103-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-22"><a href="#cb103-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb103-23"><a href="#cb103-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/442a68a51af81079f66efbb75e9de9ce7ccc8652.png" /></p>
</div>
</div>
<section id="key-takeaways-from-the-tf-idf-chart" class="cell markdown"
id="nMIRgdCLchUa">
<h3><strong>Key Takeaways from the TF-IDF Chart:</strong></h3>
<ol>
<li><strong>Top Word:</strong> <em>"Starbucks"</em> is the most
important, appearing frequently in reviews.</li>
<li><strong>Common Themes:</strong> <em>Coffee, service, order,
location, staff</em>—highlighting key customer concerns.</li>
<li><strong>Sentiment Indicators:</strong> Words like <em>"friendly,"
"great," "good," "nice"</em> suggest positive service mentions.</li>
</ol>
</section>
<div class="cell code" data-execution_count="55" id="mjlflXlWORA2">
<div class="sourceCode" id="cb104"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Reduce Dimensionality using Truncated SVD for LSA</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> TruncatedSVD</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize TruncatedSVD to reduce the TF-IDF matrix to 100 components (latent features)</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>lsa <span class="op">=</span> TruncatedSVD(n_components<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the SVD model to the TF-IDF matrix and transform the data to the lower-dimensional space</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>lsa_matrix <span class="op">=</span> lsa.fit_transform(tfidf_matrix)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="56"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="JdJmrXMgOYxd" data-outputId="5da94a69-f2ed-4b11-8586-da8f5f5782cf">
<div class="sourceCode" id="cb105"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5 (Alternate): Cluster Documents using KMeans</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the number of clusters to form</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>num_clusters <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the KMeans clustering model with 5 clusters and a fixed random state for reproducibility</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> KMeans(n_clusters<span class="op">=</span>num_clusters, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the KMeans model to the TF-IDF matrix and predict the cluster for each document</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>clusters <span class="op">=</span> kmeans.fit_predict(tfidf_matrix)</span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the cluster labels as a new column in the original DataFrame</span></span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a>df3[<span class="st">&#39;cluster&#39;</span>] <span class="op">=</span> clusters</span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-17"><a href="#cb105-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the first few rows of the DataFrame to see the text and its corresponding cluster label</span></span>
<span id="cb105-18"><a href="#cb105-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3[[<span class="st">&#39;text&#39;</span>, <span class="st">&#39;cluster&#39;</span>]].head())</span>
<span id="cb105-19"><a href="#cb105-19" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="output stream stdout">
<pre><code>                                                text  cluster
0  Ordered Caramel frappe at Drive thru, BIG MIST...        3
1  Drum-roll please! Review #100 coming right up!...        2
2  We stopped here for my Chai and Hubby&#39;s coffee...        2
3  There&#39;s been three times that I&#39;ve ordered a g...        3
4  I went in when they had 4 people working, wait...        3
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="57"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="3dRXbjYoZ2xg" data-outputId="e9287bd0-b30c-4752-92a2-f714c5bd54e8">
<div class="sourceCode" id="cb107"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVC</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> SVC(kernel<span class="op">=</span><span class="st">&#39;linear&#39;</span>)  <span class="co"># Linear Kernel is good for text data</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;SVM Accuracy:&quot;</span>, accuracy_score(y_test, y_pred))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>SVM Accuracy: 0.8739650413983441
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="58" id="IQJ9Je0OZc_S">
<div class="sourceCode" id="cb109"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Split Data into Training and Testing Sets for Supervised Learning</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the dataset into training and testing sets:</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co"># - X: TF-IDF feature matrix</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co"># - y: Target variable from &#39;stars_x&#39; column (adjust column name as needed)</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="co"># - test_size=0.2 reserves 20% of data for testing</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co"># - random_state ensures reproducibility of the split</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>    tfidf_matrix,</span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>    df3[<span class="st">&#39;stars_x&#39;</span>] <span class="op">-</span> <span class="dv">1</span>,  <span class="co"># Subtract 1 from &#39;stars_x&#39; to make it 0-4</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>    test_size<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>    random_state<span class="op">=</span><span class="dv">42</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="60" id="_fW6FVndOsCc">
<div class="sourceCode" id="cb110"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Save and Load the TF-IDF Vectorizer with Pickle</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the trained TF-IDF vectorizer to a file using pickle</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;tfidf_vectorizer.pkl&#39;</span>, <span class="st">&#39;wb&#39;</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>    pickle.dump(vectorizer, <span class="bu">file</span>)</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Later, load the vectorizer from the pickle file to ensure consistency for new data</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;tfidf_vectorizer.pkl&#39;</span>, <span class="st">&#39;rb&#39;</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>    loaded_vectorizer <span class="op">=</span> pickle.load(<span class="bu">file</span>)</span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform new text data using the loaded vectorizer (ensuring the same preprocessing and vocabulary)</span></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>new_text <span class="op">=</span> [<span class="st">&quot;This is a new Starbucks product review&quot;</span>]</span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a>new_tfidf <span class="op">=</span> loaded_vectorizer.transform(new_text)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="61"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="XCxOQv_VaIhd" data-outputId="86c7393d-22ac-4934-ea62-8b749d1c47d0">
<div class="sourceCode" id="cb111"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>high_rated_texts <span class="op">=</span> df3[df3[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&gt;=</span> <span class="dv">4</span>][<span class="st">&#39;text&#39;</span>].<span class="bu">str</span>.cat(sep<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>low_rated_texts <span class="op">=</span> df3[df3[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&lt;=</span> <span class="dv">2</span>][<span class="st">&#39;text&#39;</span>].<span class="bu">str</span>.cat(sep<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>, max_features<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>high_tf_idf <span class="op">=</span> vectorizer.fit_transform([high_rated_texts])</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>high_keywords <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>low_tf_idf <span class="op">=</span> vectorizer.fit_transform([low_rated_texts])</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>low_keywords <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Top words in high-rated reviews:&quot;</span>, high_keywords)</span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Top words in low-rated reviews:&quot;</span>, low_keywords)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Top words in high-rated reviews: [&#39;coffee&#39; &#39;drink&#39; &#39;drinks&#39; &#39;drive&#39; &#39;friendly&#39; &#39;good&#39; &#39;great&#39; &#39;just&#39; &#39;like&#39;
 &#39;location&#39; &#39;love&#39; &#39;nice&#39; &#39;order&#39; &#39;place&#39; &#39;service&#39; &#39;staff&#39; &#39;starbucks&#39;
 &#39;time&#39; &#39;ve&#39; &#39;work&#39;]
Top words in low-rated reviews: [&#39;asked&#39; &#39;coffee&#39; &#39;customer&#39; &#39;don&#39; &#39;drink&#39; &#39;drinks&#39; &#39;drive&#39; &#39;just&#39; &#39;like&#39;
 &#39;line&#39; &#39;location&#39; &#39;make&#39; &#39;minutes&#39; &#39;order&#39; &#39;ordered&#39; &#39;people&#39; &#39;service&#39;
 &#39;starbucks&#39; &#39;time&#39; &#39;ve&#39;]
</code></pre>
</div>
</div>
<div class="cell markdown" id="F5x8JI34bxfv">
<p>##TFIDF on high-rated reviews and low-rated reviews and its graphical
representation</p>
</div>
<div class="cell code" data-execution_count="62"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:507}"
id="THOudUqIbtJU" data-outputId="fd91e4ea-1f9c-461a-9242-cc1f5c3de436">
<div class="sourceCode" id="cb113"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import necessary libraries</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter high-rated (good) and low-rated (bad) reviews</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>high_rated_texts <span class="op">=</span> df3[df3[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&gt;=</span> <span class="dv">4</span>][<span class="st">&#39;text&#39;</span>].dropna().<span class="bu">str</span>.cat(sep<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>low_rated_texts <span class="op">=</span> df3[df3[<span class="st">&#39;stars_x&#39;</span>] <span class="op">&lt;=</span> <span class="dv">2</span>][<span class="st">&#39;text&#39;</span>].dropna().<span class="bu">str</span>.cat(sep<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize TF-IDF Vectorizer</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&#39;english&#39;</span>, max_features<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit and transform high-rated reviews</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>high_tf_idf <span class="op">=</span> vectorizer.fit_transform([high_rated_texts])</span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>high_keywords <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>high_tfidf_scores <span class="op">=</span> high_tf_idf.toarray().flatten()</span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit and transform low-rated reviews</span></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a>low_tf_idf <span class="op">=</span> vectorizer.fit_transform([low_rated_texts])</span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a>low_keywords <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a>low_tfidf_scores <span class="op">=</span> low_tf_idf.toarray().flatten()</span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating separate bar charts for high-rated and low-rated reviews</span></span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a><span class="co"># High-Rated Reviews TF-IDF Scores</span></span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a>plt.barh(high_keywords, high_tfidf_scores, color<span class="op">=</span><span class="st">&#39;green&#39;</span>)</span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;TF-IDF Score&quot;</span>)</span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Words&quot;</span>)</span>
<span id="cb113-31"><a href="#cb113-31" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;High-Frequency Words in High-Rated Reviews&quot;</span>)</span>
<span id="cb113-32"><a href="#cb113-32" aria-hidden="true" tabindex="-1"></a>plt.gca().invert_yaxis()</span>
<span id="cb113-33"><a href="#cb113-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-34"><a href="#cb113-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Low-Rated Reviews TF-IDF Scores</span></span>
<span id="cb113-35"><a href="#cb113-35" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb113-36"><a href="#cb113-36" aria-hidden="true" tabindex="-1"></a>plt.barh(low_keywords, low_tfidf_scores, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb113-37"><a href="#cb113-37" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;TF-IDF Score&quot;</span>)</span>
<span id="cb113-38"><a href="#cb113-38" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Words&quot;</span>)</span>
<span id="cb113-39"><a href="#cb113-39" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;High-Frequency Words in Low-Rated Reviews&quot;</span>)</span>
<span id="cb113-40"><a href="#cb113-40" aria-hidden="true" tabindex="-1"></a>plt.gca().invert_yaxis()</span>
<span id="cb113-41"><a href="#cb113-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-42"><a href="#cb113-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the graphs</span></span>
<span id="cb113-43"><a href="#cb113-43" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb113-44"><a href="#cb113-44" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_92b1186930ac49fd88eb4da1a4594c5e/cdaa134233b640a0f77366c68fd4edfc5b3c41da.png" /></p>
</div>
</div>
<section id="key-takeaways" class="cell markdown" id="NkzUYDtZc9ZB">
<h3><strong>Key Takeaways:</strong></h3>
<ol>
<li><strong>Common Focus:</strong> <em>Starbucks, coffee, drink,
service, location</em> appear in both high and low-rated reviews.<br />
</li>
<li><strong>Positive Reviews:</strong> Highlight <em>friendly, great,
love, nice</em>—praising service and experience.<br />
</li>
<li><strong>Negative Reviews:</strong> Mention <em>asked, line, minutes,
ordered</em>—indicating frustration with wait times and order
issues.<br />
</li>
<li><strong>Conclusion:</strong> Customers appreciate <strong>good
service</strong>, while delays, long wait times, and service issues and
order mistakes drive negative feedback.</li>
<li>Optimizing speed, efficiency, and customer interactions can improve
overall ratings.</li>
</ol>
</section>
<section id="overall-insights-and-recommendations" class="cell markdown"
id="ljzmsymwTHb_">
<h1>Overall Insights and Recommendations</h1>
</section>
<section id="recommendations" class="cell markdown" id="WFVC0ZdeVZgG">
<h2>Recommendations:</h2>
<ol>
<li><p>Identify the policies and procedures in place in high-performing
markets regarding cleaning and parking (AZ, MO, LA) to the poor
performing markets then begin implementing the policies that the
successful markets are using in the struggling markets</p></li>
<li><p>To accomplish this, we recommend meeting with managers from the
high-performing markets to gather the necessary information then put
together a support team that can work with managers in struggling
markets using this information to ensure that the new policies are being
implemented effectively</p></li>
<li><p>Continue to gather Yelp review data, review scores, and review
text to monitor shifts in sentiment and gauge success of policy changes
</p></li>
</ol>
</section>
<div class="cell markdown" id="Knc0FhosS_LK">
<p>##Conclusion:</p>
<p>We believe that this data, our analysis, and recommendations based on
our analysis can help Starbucks strengthen its relationship with its
customers.</p>
<p>In turn, this will help maintain strong customer loyalty and
ultimately help sustain strong profitability.</p>
</div>
</body>
</html>
